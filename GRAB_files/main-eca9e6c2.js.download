import{s as nn,u as Ye,c as ie,r as St,n as on,d as ls,i as Xe,h as rt,p as pt,a as cs,w as rn,_ as E,o as c,b as h,e as an,m as R,f as S,g as p,j as K,k as y,t as I,F as H,l as pe,v as us,q as te,x as le,y as ce,z as x,A as ln,T as cn,B as Ut,C as J,D as lt,E as M,G as ct,H as un,I as dn,J as Oe,K as Ue,L as hn,M as fn,N as ds,R as pn,P as _n,O as mn,V as Z,Q as Be,S as xe,U as Nt,W as jt,X as de,Y as vn,Z as ot,$ as hs,a0 as yn,a1 as gn,a2 as bn,a3 as wn,a4 as nt,a5 as kn,a6 as Sn,a7 as gt,a8 as fs,a9 as ps,aa as _s,ab as ms,ac as Cn,ad as Ln,ae as In,af as Tn,ag as An,ah as Pn,ai as Mn,aj as Rn,ak as En,al as Bn,am as xn}from"./App-66115577.js";/*!
  * vue-router v4.1.6
  * (c) 2022 Eduardo San Martin Morote
  * @license MIT
  */const $e=typeof window<"u";function Dn(e){return e.__esModule||e[Symbol.toStringTag]==="Module"}const j=Object.assign;function _t(e,t){const n={};for(const s in t){const i=t[s];n[s]=he(i)?i.map(e):e(i)}return n}const Ke=()=>{},he=Array.isArray,$n=/\/$/,On=e=>e.replace($n,"");function mt(e,t,n="/"){let s,i={},o="",r="";const a=t.indexOf("#");let u=t.indexOf("?");return a<u&&a>=0&&(u=-1),u>-1&&(s=t.slice(0,u),o=t.slice(u+1,a>-1?a:t.length),i=e(o)),a>-1&&(s=s||t.slice(0,a),r=t.slice(a,t.length)),s=Hn(s??t,n),{fullPath:s+(o&&"?")+o+r,path:s,query:i,hash:r}}function Un(e,t){const n=t.query?e(t.query):"";return t.path+(n&&"?")+n+(t.hash||"")}function Ht(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function Nn(e,t,n){const s=t.matched.length-1,i=n.matched.length-1;return s>-1&&s===i&&Ne(t.matched[s],n.matched[i])&&vs(t.params,n.params)&&e(t.query)===e(n.query)&&t.hash===n.hash}function Ne(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function vs(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!jn(e[n],t[n]))return!1;return!0}function jn(e,t){return he(e)?qt(e,t):he(t)?qt(t,e):e===t}function qt(e,t){return he(t)?e.length===t.length&&e.every((n,s)=>n===t[s]):e.length===1&&e[0]===t}function Hn(e,t){if(e.startsWith("/"))return e;if(!e)return t;const n=t.split("/"),s=e.split("/");let i=n.length-1,o,r;for(o=0;o<s.length;o++)if(r=s[o],r!==".")if(r==="..")i>1&&i--;else break;return n.slice(0,i).join("/")+"/"+s.slice(o-(o===s.length?1:0)).join("/")}var Ze;(function(e){e.pop="pop",e.push="push"})(Ze||(Ze={}));var We;(function(e){e.back="back",e.forward="forward",e.unknown=""})(We||(We={}));function qn(e){if(!e)if($e){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),On(e)}const Vn=/^[^#]+#/;function Fn(e,t){return e.replace(Vn,"#")+t}function Gn(e,t){const n=document.documentElement.getBoundingClientRect(),s=e.getBoundingClientRect();return{behavior:t.behavior,left:s.left-n.left-(t.left||0),top:s.top-n.top-(t.top||0)}}const ut=()=>({left:window.pageXOffset,top:window.pageYOffset});function zn(e){let t;if("el"in e){const n=e.el,s=typeof n=="string"&&n.startsWith("#"),i=typeof n=="string"?s?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!i)return;t=Gn(i,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.pageXOffset,t.top!=null?t.top:window.pageYOffset)}function Vt(e,t){return(history.state?history.state.position-t:-1)+e}const bt=new Map;function Yn(e,t){bt.set(e,t)}function Kn(e){const t=bt.get(e);return bt.delete(e),t}let Wn=()=>location.protocol+"//"+location.host;function ys(e,t){const{pathname:n,search:s,hash:i}=t,o=e.indexOf("#");if(o>-1){let a=i.includes(e.slice(o))?e.slice(o).length:1,u=i.slice(a);return u[0]!=="/"&&(u="/"+u),Ht(u,"")}return Ht(n,e)+s+i}function Xn(e,t,n,s){let i=[],o=[],r=null;const a=({state:m})=>{const g=ys(e,location),b=n.value,B=t.value;let C=0;if(m){if(n.value=g,t.value=m,r&&r===b){r=null;return}C=B?m.position-B.position:0}else s(g);i.forEach(T=>{T(n.value,b,{delta:C,type:Ze.pop,direction:C?C>0?We.forward:We.back:We.unknown})})};function u(){r=n.value}function f(m){i.push(m);const g=()=>{const b=i.indexOf(m);b>-1&&i.splice(b,1)};return o.push(g),g}function d(){const{history:m}=window;m.state&&m.replaceState(j({},m.state,{scroll:ut()}),"")}function _(){for(const m of o)m();o=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",d)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",d),{pauseListeners:u,listen:f,destroy:_}}function Ft(e,t,n,s=!1,i=!1){return{back:e,current:t,forward:n,replaced:s,position:window.history.length,scroll:i?ut():null}}function Zn(e){const{history:t,location:n}=window,s={value:ys(e,n)},i={value:t.state};i.value||o(s.value,{back:null,current:s.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function o(u,f,d){const _=e.indexOf("#"),m=_>-1?(n.host&&document.querySelector("base")?e:e.slice(_))+u:Wn()+e+u;try{t[d?"replaceState":"pushState"](f,"",m),i.value=f}catch(g){console.error(g),n[d?"replace":"assign"](m)}}function r(u,f){const d=j({},t.state,Ft(i.value.back,u,i.value.forward,!0),f,{position:i.value.position});o(u,d,!0),s.value=u}function a(u,f){const d=j({},i.value,t.state,{forward:u,scroll:ut()});o(d.current,d,!0);const _=j({},Ft(s.value,u,null),{position:d.position+1},f);o(u,_,!1),s.value=u}return{location:s,state:i,push:a,replace:r}}function Jn(e){e=qn(e);const t=Zn(e),n=Xn(e,t.state,t.location,t.replace);function s(o,r=!0){r||n.pauseListeners(),history.go(o)}const i=j({location:"",base:e,go:s,createHref:Fn.bind(null,e)},t,n);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>t.state.value}),i}function Qn(e){return typeof e=="string"||e&&typeof e=="object"}function gs(e){return typeof e=="string"||typeof e=="symbol"}const Te={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},bs=Symbol("");var Gt;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(Gt||(Gt={}));function je(e,t){return j(new Error,{type:e,[bs]:!0},t)}function be(e,t){return e instanceof Error&&bs in e&&(t==null||!!(e.type&t))}const zt="[^/]+?",ei={sensitive:!1,strict:!1,start:!0,end:!0},ti=/[.+*?^${}()[\]/\\]/g;function si(e,t){const n=j({},ei,t),s=[];let i=n.start?"^":"";const o=[];for(const f of e){const d=f.length?[]:[90];n.strict&&!f.length&&(i+="/");for(let _=0;_<f.length;_++){const m=f[_];let g=40+(n.sensitive?.25:0);if(m.type===0)_||(i+="/"),i+=m.value.replace(ti,"\\$&"),g+=40;else if(m.type===1){const{value:b,repeatable:B,optional:C,regexp:T}=m;o.push({name:b,repeatable:B,optional:C});const A=T||zt;if(A!==zt){g+=10;try{new RegExp(`(${A})`)}catch(X){throw new Error(`Invalid custom RegExp for param "${b}" (${A}): `+X.message)}}let U=B?`((?:${A})(?:/(?:${A}))*)`:`(${A})`;_||(U=C&&f.length<2?`(?:/${U})`:"/"+U),C&&(U+="?"),i+=U,g+=20,C&&(g+=-8),B&&(g+=-20),A===".*"&&(g+=-50)}d.push(g)}s.push(d)}if(n.strict&&n.end){const f=s.length-1;s[f][s[f].length-1]+=.7000000000000001}n.strict||(i+="/?"),n.end?i+="$":n.strict&&(i+="(?:/|$)");const r=new RegExp(i,n.sensitive?"":"i");function a(f){const d=f.match(r),_={};if(!d)return null;for(let m=1;m<d.length;m++){const g=d[m]||"",b=o[m-1];_[b.name]=g&&b.repeatable?g.split("/"):g}return _}function u(f){let d="",_=!1;for(const m of e){(!_||!d.endsWith("/"))&&(d+="/"),_=!1;for(const g of m)if(g.type===0)d+=g.value;else if(g.type===1){const{value:b,repeatable:B,optional:C}=g,T=b in f?f[b]:"";if(he(T)&&!B)throw new Error(`Provided param "${b}" is an array but it is not repeatable (* or + modifiers)`);const A=he(T)?T.join("/"):T;if(!A)if(C)m.length<2&&(d.endsWith("/")?d=d.slice(0,-1):_=!0);else throw new Error(`Missing required param "${b}"`);d+=A}}return d||"/"}return{re:r,score:s,keys:o,parse:a,stringify:u}}function ni(e,t){let n=0;for(;n<e.length&&n<t.length;){const s=t[n]-e[n];if(s)return s;n++}return e.length<t.length?e.length===1&&e[0]===40+40?-1:1:e.length>t.length?t.length===1&&t[0]===40+40?1:-1:0}function ii(e,t){let n=0;const s=e.score,i=t.score;for(;n<s.length&&n<i.length;){const o=ni(s[n],i[n]);if(o)return o;n++}if(Math.abs(i.length-s.length)===1){if(Yt(s))return 1;if(Yt(i))return-1}return i.length-s.length}function Yt(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const oi={type:0,value:""},ri=/[a-zA-Z0-9_]/;function ai(e){if(!e)return[[]];if(e==="/")return[[oi]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(g){throw new Error(`ERR (${n})/"${f}": ${g}`)}let n=0,s=n;const i=[];let o;function r(){o&&i.push(o),o=[]}let a=0,u,f="",d="";function _(){f&&(n===0?o.push({type:0,value:f}):n===1||n===2||n===3?(o.length>1&&(u==="*"||u==="+")&&t(`A repeatable param (${f}) must be alone in its segment. eg: '/:ids+.`),o.push({type:1,value:f,regexp:d,repeatable:u==="*"||u==="+",optional:u==="*"||u==="?"})):t("Invalid state to consume buffer"),f="")}function m(){f+=u}for(;a<e.length;){if(u=e[a++],u==="\\"&&n!==2){s=n,n=4;continue}switch(n){case 0:u==="/"?(f&&_(),r()):u===":"?(_(),n=1):m();break;case 4:m(),n=s;break;case 1:u==="("?n=2:ri.test(u)?m():(_(),n=0,u!=="*"&&u!=="?"&&u!=="+"&&a--);break;case 2:u===")"?d[d.length-1]=="\\"?d=d.slice(0,-1)+u:n=3:d+=u;break;case 3:_(),n=0,u!=="*"&&u!=="?"&&u!=="+"&&a--,d="";break;default:t("Unknown state");break}}return n===2&&t(`Unfinished custom RegExp for param "${f}"`),_(),r(),i}function li(e,t,n){const s=si(ai(e.path),n),i=j(s,{record:e,parent:t,children:[],alias:[]});return t&&!i.record.aliasOf==!t.record.aliasOf&&t.children.push(i),i}function ci(e,t){const n=[],s=new Map;t=Xt({strict:!1,end:!0,sensitive:!1},t);function i(d){return s.get(d)}function o(d,_,m){const g=!m,b=ui(d);b.aliasOf=m&&m.record;const B=Xt(t,d),C=[b];if("alias"in d){const U=typeof d.alias=="string"?[d.alias]:d.alias;for(const X of U)C.push(j({},b,{components:m?m.record.components:b.components,path:X,aliasOf:m?m.record:b}))}let T,A;for(const U of C){const{path:X}=U;if(_&&X[0]!=="/"){const z=_.record.path,F=z[z.length-1]==="/"?"":"/";U.path=_.record.path+(X&&F+X)}if(T=li(U,_,B),m?m.alias.push(T):(A=A||T,A!==T&&A.alias.push(T),g&&d.name&&!Wt(T)&&r(d.name)),b.children){const z=b.children;for(let F=0;F<z.length;F++)o(z[F],T,m&&m.children[F])}m=m||T,(T.record.components&&Object.keys(T.record.components).length||T.record.name||T.record.redirect)&&u(T)}return A?()=>{r(A)}:Ke}function r(d){if(gs(d)){const _=s.get(d);_&&(s.delete(d),n.splice(n.indexOf(_),1),_.children.forEach(r),_.alias.forEach(r))}else{const _=n.indexOf(d);_>-1&&(n.splice(_,1),d.record.name&&s.delete(d.record.name),d.children.forEach(r),d.alias.forEach(r))}}function a(){return n}function u(d){let _=0;for(;_<n.length&&ii(d,n[_])>=0&&(d.record.path!==n[_].record.path||!ws(d,n[_]));)_++;n.splice(_,0,d),d.record.name&&!Wt(d)&&s.set(d.record.name,d)}function f(d,_){let m,g={},b,B;if("name"in d&&d.name){if(m=s.get(d.name),!m)throw je(1,{location:d});B=m.record.name,g=j(Kt(_.params,m.keys.filter(A=>!A.optional).map(A=>A.name)),d.params&&Kt(d.params,m.keys.map(A=>A.name))),b=m.stringify(g)}else if("path"in d)b=d.path,m=n.find(A=>A.re.test(b)),m&&(g=m.parse(b),B=m.record.name);else{if(m=_.name?s.get(_.name):n.find(A=>A.re.test(_.path)),!m)throw je(1,{location:d,currentLocation:_});B=m.record.name,g=j({},_.params,d.params),b=m.stringify(g)}const C=[];let T=m;for(;T;)C.unshift(T.record),T=T.parent;return{name:B,path:b,params:g,matched:C,meta:hi(C)}}return e.forEach(d=>o(d)),{addRoute:o,resolve:f,removeRoute:r,getRoutes:a,getRecordMatcher:i}}function Kt(e,t){const n={};for(const s of t)s in e&&(n[s]=e[s]);return n}function ui(e){return{path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:void 0,beforeEnter:e.beforeEnter,props:di(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}}}function di(e){const t={},n=e.props||!1;if("component"in e)t.default=n;else for(const s in e.components)t[s]=typeof n=="boolean"?n:n[s];return t}function Wt(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function hi(e){return e.reduce((t,n)=>j(t,n.meta),{})}function Xt(e,t){const n={};for(const s in e)n[s]=s in t?t[s]:e[s];return n}function ws(e,t){return t.children.some(n=>n===e||ws(e,n))}const ks=/#/g,fi=/&/g,pi=/\//g,_i=/=/g,mi=/\?/g,Ss=/\+/g,vi=/%5B/g,yi=/%5D/g,Cs=/%5E/g,gi=/%60/g,Ls=/%7B/g,bi=/%7C/g,Is=/%7D/g,wi=/%20/g;function Ct(e){return encodeURI(""+e).replace(bi,"|").replace(vi,"[").replace(yi,"]")}function ki(e){return Ct(e).replace(Ls,"{").replace(Is,"}").replace(Cs,"^")}function wt(e){return Ct(e).replace(Ss,"%2B").replace(wi,"+").replace(ks,"%23").replace(fi,"%26").replace(gi,"`").replace(Ls,"{").replace(Is,"}").replace(Cs,"^")}function Si(e){return wt(e).replace(_i,"%3D")}function Ci(e){return Ct(e).replace(ks,"%23").replace(mi,"%3F")}function Li(e){return e==null?"":Ci(e).replace(pi,"%2F")}function at(e){try{return decodeURIComponent(""+e)}catch{}return""+e}function Ii(e){const t={};if(e===""||e==="?")return t;const s=(e[0]==="?"?e.slice(1):e).split("&");for(let i=0;i<s.length;++i){const o=s[i].replace(Ss," "),r=o.indexOf("="),a=at(r<0?o:o.slice(0,r)),u=r<0?null:at(o.slice(r+1));if(a in t){let f=t[a];he(f)||(f=t[a]=[f]),f.push(u)}else t[a]=u}return t}function Zt(e){let t="";for(let n in e){const s=e[n];if(n=Si(n),s==null){s!==void 0&&(t+=(t.length?"&":"")+n);continue}(he(s)?s.map(o=>o&&wt(o)):[s&&wt(s)]).forEach(o=>{o!==void 0&&(t+=(t.length?"&":"")+n,o!=null&&(t+="="+o))})}return t}function Ti(e){const t={};for(const n in e){const s=e[n];s!==void 0&&(t[n]=he(s)?s.map(i=>i==null?null:""+i):s==null?s:""+s)}return t}const Ai=Symbol(""),Jt=Symbol(""),Lt=Symbol(""),Ts=Symbol(""),kt=Symbol("");function ze(){let e=[];function t(s){return e.push(s),()=>{const i=e.indexOf(s);i>-1&&e.splice(i,1)}}function n(){e=[]}return{add:t,list:()=>e,reset:n}}function Ae(e,t,n,s,i){const o=s&&(s.enterCallbacks[i]=s.enterCallbacks[i]||[]);return()=>new Promise((r,a)=>{const u=_=>{_===!1?a(je(4,{from:n,to:t})):_ instanceof Error?a(_):Qn(_)?a(je(2,{from:t,to:_})):(o&&s.enterCallbacks[i]===o&&typeof _=="function"&&o.push(_),r())},f=e.call(s&&s.instances[i],t,n,u);let d=Promise.resolve(f);e.length<3&&(d=d.then(u)),d.catch(_=>a(_))})}function vt(e,t,n,s){const i=[];for(const o of e)for(const r in o.components){let a=o.components[r];if(!(t!=="beforeRouteEnter"&&!o.instances[r]))if(Pi(a)){const f=(a.__vccOpts||a)[t];f&&i.push(Ae(f,n,s,o,r))}else{let u=a();i.push(()=>u.then(f=>{if(!f)return Promise.reject(new Error(`Couldn't resolve component "${r}" at "${o.path}"`));const d=Dn(f)?f.default:f;o.components[r]=d;const m=(d.__vccOpts||d)[t];return m&&Ae(m,n,s,o,r)()}))}}return i}function Pi(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function Qt(e){const t=Xe(Lt),n=Xe(Ts),s=ie(()=>t.resolve(Ye(e.to))),i=ie(()=>{const{matched:u}=s.value,{length:f}=u,d=u[f-1],_=n.matched;if(!d||!_.length)return-1;const m=_.findIndex(Ne.bind(null,d));if(m>-1)return m;const g=es(u[f-2]);return f>1&&es(d)===g&&_[_.length-1].path!==g?_.findIndex(Ne.bind(null,u[f-2])):m}),o=ie(()=>i.value>-1&&Bi(n.params,s.value.params)),r=ie(()=>i.value>-1&&i.value===n.matched.length-1&&vs(n.params,s.value.params));function a(u={}){return Ei(u)?t[Ye(e.replace)?"replace":"push"](Ye(e.to)).catch(Ke):Promise.resolve()}return{route:s,href:ie(()=>s.value.href),isActive:o,isExactActive:r,navigate:a}}const Mi=ls({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:Qt,setup(e,{slots:t}){const n=St(Qt(e)),{options:s}=Xe(Lt),i=ie(()=>({[ts(e.activeClass,s.linkActiveClass,"router-link-active")]:n.isActive,[ts(e.exactActiveClass,s.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const o=t.default&&t.default(n);return e.custom?o:rt("a",{"aria-current":n.isExactActive?e.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:i.value},o)}}}),Ri=Mi;function Ei(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function Bi(e,t){for(const n in t){const s=t[n],i=e[n];if(typeof s=="string"){if(s!==i)return!1}else if(!he(i)||i.length!==s.length||s.some((o,r)=>o!==i[r]))return!1}return!0}function es(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const ts=(e,t,n)=>e??t??n,xi=ls({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:n}){const s=Xe(kt),i=ie(()=>e.route||s.value),o=Xe(Jt,0),r=ie(()=>{let f=Ye(o);const{matched:d}=i.value;let _;for(;(_=d[f])&&!_.components;)f++;return f}),a=ie(()=>i.value.matched[r.value]);pt(Jt,ie(()=>r.value+1)),pt(Ai,a),pt(kt,i);const u=cs();return rn(()=>[u.value,a.value,e.name],([f,d,_],[m,g,b])=>{d&&(d.instances[_]=f,g&&g!==d&&f&&f===m&&(d.leaveGuards.size||(d.leaveGuards=g.leaveGuards),d.updateGuards.size||(d.updateGuards=g.updateGuards))),f&&d&&(!g||!Ne(d,g)||!m)&&(d.enterCallbacks[_]||[]).forEach(B=>B(f))},{flush:"post"}),()=>{const f=i.value,d=e.name,_=a.value,m=_&&_.components[d];if(!m)return ss(n.default,{Component:m,route:f});const g=_.props[d],b=g?g===!0?f.params:typeof g=="function"?g(f):g:null,C=rt(m,j({},b,t,{onVnodeUnmounted:T=>{T.component.isUnmounted&&(_.instances[d]=null)},ref:u}));return ss(n.default,{Component:C,route:f})||C}}});function ss(e,t){if(!e)return null;const n=e(t);return n.length===1?n[0]:n}const Di=xi;function $i(e){const t=ci(e.routes,e),n=e.parseQuery||Ii,s=e.stringifyQuery||Zt,i=e.history,o=ze(),r=ze(),a=ze(),u=nn(Te);let f=Te;$e&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const d=_t.bind(null,v=>""+v),_=_t.bind(null,Li),m=_t.bind(null,at);function g(v,L){let w,P;return gs(v)?(w=t.getRecordMatcher(v),P=L):P=v,t.addRoute(P,w)}function b(v){const L=t.getRecordMatcher(v);L&&t.removeRoute(L)}function B(){return t.getRoutes().map(v=>v.record)}function C(v){return!!t.getRecordMatcher(v)}function T(v,L){if(L=j({},L||u.value),typeof v=="string"){const D=mt(n,v,L.path),Y=t.resolve({path:D.path},L),Le=i.createHref(D.fullPath);return j(D,Y,{params:m(Y.params),hash:at(D.hash),redirectedFrom:void 0,href:Le})}let w;if("path"in v)w=j({},v,{path:mt(n,v.path,L.path).path});else{const D=j({},v.params);for(const Y in D)D[Y]==null&&delete D[Y];w=j({},v,{params:_(v.params)}),L.params=_(L.params)}const P=t.resolve(w,L),N=v.hash||"";P.params=d(m(P.params));const G=Un(s,j({},v,{hash:ki(N),path:P.path})),$=i.createHref(G);return j({fullPath:G,hash:N,query:s===Zt?Ti(v.query):v.query||{}},P,{redirectedFrom:void 0,href:$})}function A(v){return typeof v=="string"?mt(n,v,u.value.path):j({},v)}function U(v,L){if(f!==v)return je(8,{from:L,to:v})}function X(v){return q(v)}function z(v){return X(j(A(v),{replace:!0}))}function F(v){const L=v.matched[v.matched.length-1];if(L&&L.redirect){const{redirect:w}=L;let P=typeof w=="function"?w(v):w;return typeof P=="string"&&(P=P.includes("?")||P.includes("#")?P=A(P):{path:P},P.params={}),j({query:v.query,hash:v.hash,params:"path"in P?{}:v.params},P)}}function q(v,L){const w=f=T(v),P=u.value,N=v.state,G=v.force,$=v.replace===!0,D=F(w);if(D)return q(j(A(D),{state:typeof D=="object"?j({},N,D.state):N,force:G,replace:$}),L||w);const Y=w;Y.redirectedFrom=L;let Le;return!G&&Nn(s,P,w)&&(Le=je(16,{to:Y,from:P}),ve(P,P,!0,!1)),(Le?Promise.resolve(Le):re(Y,P)).catch(ee=>be(ee)?be(ee,2)?ee:me(ee):_e(ee,Y,P)).then(ee=>{if(ee){if(be(ee,2))return q(j({replace:$},A(ee.to),{state:typeof ee.to=="object"?j({},N,ee.to.state):N,force:G}),L||Y)}else ee=ue(Y,P,!0,$,N);return we(Y,P,ee),ee})}function ne(v,L){const w=U(v,L);return w?Promise.reject(w):Promise.resolve()}function re(v,L){let w;const[P,N,G]=Oi(v,L);w=vt(P.reverse(),"beforeRouteLeave",v,L);for(const D of P)D.leaveGuards.forEach(Y=>{w.push(Ae(Y,v,L))});const $=ne.bind(null,v,L);return w.push($),De(w).then(()=>{w=[];for(const D of o.list())w.push(Ae(D,v,L));return w.push($),De(w)}).then(()=>{w=vt(N,"beforeRouteUpdate",v,L);for(const D of N)D.updateGuards.forEach(Y=>{w.push(Ae(Y,v,L))});return w.push($),De(w)}).then(()=>{w=[];for(const D of v.matched)if(D.beforeEnter&&!L.matched.includes(D))if(he(D.beforeEnter))for(const Y of D.beforeEnter)w.push(Ae(Y,v,L));else w.push(Ae(D.beforeEnter,v,L));return w.push($),De(w)}).then(()=>(v.matched.forEach(D=>D.enterCallbacks={}),w=vt(G,"beforeRouteEnter",v,L),w.push($),De(w))).then(()=>{w=[];for(const D of r.list())w.push(Ae(D,v,L));return w.push($),De(w)}).catch(D=>be(D,8)?D:Promise.reject(D))}function we(v,L,w){for(const P of a.list())P(v,L,w)}function ue(v,L,w,P,N){const G=U(v,L);if(G)return G;const $=L===Te,D=$e?history.state:{};w&&(P||$?i.replace(v.fullPath,j({scroll:$&&D&&D.scroll},N)):i.push(v.fullPath,N)),u.value=v,ve(v,L,w,$),me()}let Q;function fe(){Q||(Q=i.listen((v,L,w)=>{if(!et.listening)return;const P=T(v),N=F(P);if(N){q(j(N,{replace:!0}),P).catch(Ke);return}f=P;const G=u.value;$e&&Yn(Vt(G.fullPath,w.delta),ut()),re(P,G).catch($=>be($,12)?$:be($,2)?(q($.to,P).then(D=>{be(D,20)&&!w.delta&&w.type===Ze.pop&&i.go(-1,!1)}).catch(Ke),Promise.reject()):(w.delta&&i.go(-w.delta,!1),_e($,P,G))).then($=>{$=$||ue(P,G,!1),$&&(w.delta&&!be($,8)?i.go(-w.delta,!1):w.type===Ze.pop&&be($,20)&&i.go(-1,!1)),we(P,G,$)}).catch(Ke)}))}let ke=ze(),Se=ze(),oe;function _e(v,L,w){me(v);const P=Se.list();return P.length?P.forEach(N=>N(v,L,w)):console.error(v),Promise.reject(v)}function Me(){return oe&&u.value!==Te?Promise.resolve():new Promise((v,L)=>{ke.add([v,L])})}function me(v){return oe||(oe=!v,fe(),ke.list().forEach(([L,w])=>v?w(v):L()),ke.reset()),v}function ve(v,L,w,P){const{scrollBehavior:N}=e;if(!$e||!N)return Promise.resolve();const G=!w&&Kn(Vt(v.fullPath,0))||(P||!w)&&history.state&&history.state.scroll||null;return on().then(()=>N(v,L,G)).then($=>$&&zn($)).catch($=>_e($,v,L))}const Ce=v=>i.go(v);let qe;const Re=new Set,et={currentRoute:u,listening:!0,addRoute:g,removeRoute:b,hasRoute:C,getRoutes:B,resolve:T,options:e,push:X,replace:z,go:Ce,back:()=>Ce(-1),forward:()=>Ce(1),beforeEach:o.add,beforeResolve:r.add,afterEach:a.add,onError:Se.add,isReady:Me,install(v){const L=this;v.component("RouterLink",Ri),v.component("RouterView",Di),v.config.globalProperties.$router=L,Object.defineProperty(v.config.globalProperties,"$route",{enumerable:!0,get:()=>Ye(u)}),$e&&!qe&&u.value===Te&&(qe=!0,X(i.location).catch(N=>{}));const w={};for(const N in Te)w[N]=ie(()=>u.value[N]);v.provide(Lt,L),v.provide(Ts,St(w)),v.provide(kt,u);const P=v.unmount;Re.add(v),v.unmount=function(){Re.delete(v),Re.size<1&&(f=Te,Q&&Q(),Q=null,u.value=Te,qe=!1,oe=!1),P()}}};return et}function De(e){return e.reduce((t,n)=>t.then(()=>n()),Promise.resolve())}function Oi(e,t){const n=[],s=[],i=[],o=Math.max(t.matched.length,e.matched.length);for(let r=0;r<o;r++){const a=t.matched[r];a&&(e.matched.find(f=>Ne(f,a))?s.push(a):n.push(a));const u=e.matched[r];u&&(t.matched.find(f=>Ne(f,u))||i.push(u))}return[n,s,i]}const As="/logo.webp",Ui="/assets/player-b3e126ef.png",Ni="/assets/editor-d1e72e83.png",ji={mounted(){const e=document.querySelectorAll(".section-fade"),t=(s,i)=>{s.forEach(o=>{o.isIntersecting&&(o.target.classList.add("section-visible"),i.unobserve(o.target))})},n=new IntersectionObserver(t,{root:null,threshold:0,rootMargin:"0px"});e.forEach(s=>{n.observe(s)}),document.addEventListener("scroll",()=>{const s=window.scrollY+window.innerHeight;e.forEach(i=>{const o=i.offsetTop;s>o&&i.classList.add("section-visible")})})}},Hi={id:"homepage"},qi=an('<header><img src="'+As+'" alt="GRAB Logo"><div class="buttons"><a href="https://www.meta.com/experiences/4104088956355944/" aria-label="Get GRAB on Meta">GET GRAB!</a><a href="/levels" aria-label="Browse GRAB levels">BROWSE LEVELS</a></div><h2>FREE TO PLAY ON META, STEAM, AND PICO</h2></header><main><section id="trailer" class="section-fade"><h3>ARE YOU READY TO <strong>GRAB</strong> YOUR DESTINY?</h3><video id="trailer-video" autoplay muted loop controls><source src="https://files.slindev.com/videos/grab_trailer.mp4" type="video/mp4"></video></section><section class="section-fade"><h3>PLAY COMMUNITY BUILT PARKOUR LEVELS</h3><p>GRAB is a VR multiplayer parkour game. Climb, jump, slide and swing through the levels to reach the end, but don&#39;t fall or touch the lava!</p></section><section class="section-fade"><h3>BUILD YOUR OWN MAPS IN THE EDITOR</h3><p>A core component of GRAB is the level editor that lets you and your friends create your own levels together and upload them for everyone else to play. View community creations on the level browser!</p><div class="buttons"><a href="/levels" aria-label="Browse GRAB levels">LEVEL BROWSER</a></div></section><section class="section-fade"><h3>JOIN THE COMMUNITY!</h3><p>Join the GRAB community on Discord to share your levels, get feedback, and find other players to play with.</p><div class="buttons"><a href="https://discord.gg/slindev" aria-label="Join GRAB community on Discord">DISCORD</a></div></section><section class="section-fade"><h3>GET GRAB!</h3><p>GRAB is available on Meta, Steam, and Pico. Click the links below to download the game.</p><div class="buttons buttons-mid"><a href="https://store.steampowered.com/app/1701130/GRAB/" aria-label="Get GRAB on Steam">GRAB ON STEAM</a><a href="https://www.meta.com/experiences/4104088956355944/" aria-label="Get GRAB on Meta">GRAB ON META</a><a href="https://www.picoxr.com/global/games/grab" aria-label="Get GRAB on Pico">GRAB ON PICO</a><a href="https://sidequestvr.com/app/4222/grab" aria-label="Get GRAB on SideQuest">GRAB ON SIDEQUEST</a></div></section></main><div id="players"><div><img src="'+Ui+'" title="Player by BlackCat508" alt="GRAB player"><img src="'+Ni+'" title="Builder by BlackCat508" alt="GRAB builder"></div></div><footer><nav><span id="copy"><span>© <a href="https://slindev.com" aria-label="SlinDev&#39;s website">SlinDev</a> 2024</span><span>Site by <a href="https://twhlynch.me" aria-label="twhlynch&#39;s website">twhlynch</a></span></span><nav><a href="https://slindev.com/legalnotice" aria-label="Legal notice">LEGAL NOTICE</a><a href="https://slindev.com/privacy" aria-label="Privacy policy">PRIVACY POLICY</a><a href="https://slindev.com/terms" aria-label="End user license agreement">EULA</a><a href="https://slindev.com" aria-label="SlinDev website">SLINDEV</a><a href="https://www.youtube.com/@grabvrgame" aria-label="GRAB YouTube channel">YOUTUBE</a><a href="https://www.tiktok.com/@grabvrgame" aria-label="GRAB TikTok channel">TIKTOK</a></nav></nav></footer>',4),Vi=[qi];function Fi(e,t,n,s,i,o){return c(),h("div",Hi,Vi)}const Gi=E(ji,[["render",Fi]]);const zi={emits:["tabChanged","searchChanged"],props:{tabActive:String,searchTerm:String},data(){return{searchTypingTimer:""}},computed:{wantsSearch(){return this.tabActive==="tab_newest"||this.tabActive==="tab_search_users"},...R(S,["isLoggedIn"]),...R(S,["isVerifier"]),...R(S,["isSuperModerator"])},methods:{setTabActive(e){this.$emit("tabChanged",{tab:e})},changedSearchTerm(e){clearTimeout(this.searchTypingTimer),this.searchTypingTimer=setTimeout(()=>{let t=e;t&&t.length>0&&(t=t.toLowerCase().replace(/[^a-z0-9]/g," ")),this.$emit("searchChanged",t)},500)}}},Yi={class:"tab",id:"tabbar"},Ki={key:2},Wi={key:3};function Xi(e,t,n,s,i,o){return c(),h("div",Yi,[p("button",{class:K(n.tabActive==="tab_newest"?"tablinks active":"tablinks"),onClick:t[0]||(t[0]=r=>o.setTabActive("tab_newest")),id:"tab_newest"},"All Levels",2),p("button",{class:K(n.tabActive==="tab_ok_newest"?"tablinks active":"tablinks"),onClick:t[1]||(t[1]=r=>o.setTabActive("tab_ok_newest")),id:"tab_ok_newest"},"Verified Levels",2),p("button",{class:K(n.tabActive==="tab_featured"?"tablinks active":"tablinks"),onClick:t[2]||(t[2]=r=>o.setTabActive("tab_featured")),id:"tab_featured"},"Featured",2),e.isLoggedIn?(c(),h("button",{key:0,class:K(n.tabActive==="tab_my_levels"?"tablinks active":"tablinks"),onClick:t[3]||(t[3]=r=>o.setTabActive("tab_my_levels")),id:"tab_my_levels"},"My Levels",2)):y("",!0),e.isLoggedIn?(c(),h("button",{key:1,class:K(n.tabActive==="tab_favorite_levels"?"tablinks active":"tablinks"),onClick:t[4]||(t[4]=r=>o.setTabActive("tab_favorite_levels")),id:"tab_favorite_levels"},"My Favorites",2)):y("",!0),p("button",{class:K(n.tabActive==="tab_search_users"?"tablinks active":"tablinks"),onClick:t[5]||(t[5]=r=>o.setTabActive("tab_search_users")),id:"tab_search_users"},"Players",2),e.isVerifier||e.isSuperModerator?(c(),h("br",Ki)):y("",!0),e.isVerifier||e.isSuperModerator?(c(),h("br",Wi)):y("",!0),e.isVerifier?(c(),h("button",{key:4,class:K(n.tabActive==="tab_verify_queue"?"tablinks active":"tablinks"),onClick:t[6]||(t[6]=r=>o.setTabActive("tab_verify_queue")),id:"tab_verify_queue"},"Verify Queue",2)):y("",!0),e.isSuperModerator?(c(),h("button",{key:5,class:K(n.tabActive==="tab_reported_levels"?"tablinks active":"tablinks"),onClick:t[7]||(t[7]=r=>o.setTabActive("tab_reported_levels")),id:"tab_reported_levels"},"Reported Levels",2)):y("",!0),e.isSuperModerator?(c(),h("button",{key:6,class:K(n.tabActive==="tab_reported_users"?"tablinks active":"tablinks"),onClick:t[8]||(t[8]=r=>o.setTabActive("tab_reported_users")),id:"tab_reported_users"},"Reported Users",2)):y("",!0),e.isSuperModerator?(c(),h("button",{key:7,class:K(n.tabActive==="tab_banned_users"?"tablinks active":"tablinks"),onClick:t[9]||(t[9]=r=>o.setTabActive("tab_banned_users")),id:"tab_banned_users"},"Banned Users",2)):y("",!0),e.isSuperModerator?(c(),h("button",{key:8,class:K(n.tabActive==="tab_hidden"?"tablinks active":"tablinks"),onClick:t[10]||(t[10]=r=>o.setTabActive("tab_hidden")),id:"tab_hidden"},"Hidden Levels",2)):y("",!0),e.isSuperModerator?(c(),h("button",{key:9,class:K(n.tabActive==="tab_deletion_queue"?"tablinks active":"tablinks"),onClick:t[11]||(t[11]=r=>o.setTabActive("tab_deletion_queue")),id:"tab_deletion_queue"},"Deletion Queue",2)):y("",!0),e.isSuperModerator?(c(),h("button",{key:10,class:K(n.tabActive==="tab_audit"?"tablinks active":"tablinks"),onClick:t[12]||(t[12]=r=>o.setTabActive("tab_audit")),id:"tab_audit"},"Audit Log",2)):y("",!0),o.wantsSearch?(c(),h("input",{key:11,spellcheck:"false",type:"text",id:"search_field",placeholder:"Search..",onInput:t[13]||(t[13]=r=>o.changedSearchTerm(r.target.value))},null,32)):y("",!0)])}const Zi=E(zi,[["render",Xi],["__scopeId","data-v-da498142"]]);async function Ji(e,t){const n=await fetch(e+"total_level_count?type="+t),s=await n.text();return n.status!=200?(confirm("Error: "+s),!1):s}const Qi={props:{tagString:String},data(){return{count:0}},computed:{listLevelCount(){return S().list.length}},methods:{async updateCounter(){if(this.count=void 0,this.tagString==="favorite_levels"){const e=S();this.count=e.favoriteLevels.length}else{const e=this.tagString,t=await Ji(this.$api_server_url,this.tagString);t!==!1&&e===this.tagString&&(this.count=t)}}},created(){this.updateCounter()},watch:{tagString(e){this.updateCounter()}}},eo={key:0,class:"level-tab-title"},to={key:1,class:"level-tab-title"};function so(e,t,n,s,i,o){return i.count>0?(c(),h("div",eo,I(i.count)+" level"+I(i.count!=1?"s":""),1)):(c(),h("div",to,I(o.listLevelCount)+" level"+I(o.listLevelCount!=1?"s":""),1))}const no=E(Qi,[["render",so],["__scopeId","data-v-2895d8af"]]);async function io(e,t,n,s){const i=`${e}set_user_info_admin/${n}?is_creator=${s}`,o=await fetch(i,{headers:{Authorization:"Bearer "+t}}),r=await o.text();return o.status!=200||r!=="Success"?(confirm("Error: "+r),!1):!0}const oo={props:{userID:String,isCreator:Boolean},computed:{...R(S,["accessToken"]),...R(S,["isAdmin"])},methods:{async toggleCreator(){await io(this.$api_server_url,this.accessToken,this.userID,!this.isCreator)}}};function ro(e,t,n,s,i,o){return e.isAdmin?(c(),h("button",{key:0,class:K(n.isCreator?"remove-creator-button":"make-creator-button"),onClick:t[0]||(t[0]=(...r)=>o.toggleCreator&&o.toggleCreator(...r))},I(n.isCreator?"Remove":"Make")+" Creator",3)):y("",!0)}const Ps=E(oo,[["render",ro],["__scopeId","data-v-9458edc4"]]);async function ao(e,t,n,s){const i=`${e}set_user_info_admin/${n}?is_verifier=${s}`,o=await fetch(i,{headers:{Authorization:"Bearer "+t}}),r=await o.text();return o.status!=200||r!=="Success"?(confirm("Error: "+r),!1):!0}const lo={props:{userID:String,isVerifier:Boolean},computed:{...R(S,["accessToken"]),...R(S,["isAdmin"])},methods:{async toggleVerifier(){await ao(this.$api_server_url,this.accessToken,this.userID,!this.isVerifier)}}};function co(e,t,n,s,i,o){return e.isAdmin?(c(),h("button",{key:0,class:K(n.isVerifier?"remove-verifier-button":"make-verifier-button"),onClick:t[0]||(t[0]=(...r)=>o.toggleVerifier&&o.toggleVerifier(...r))},I(n.isVerifier?"Remove":"Make")+" Verifier",3)):y("",!0)}const Ms=E(lo,[["render",co],["__scopeId","data-v-5d2d2acd"]]);async function uo(e,t,n,s){const i=`${e}set_user_info_admin/${n}?is_moderator=${s}`,o=await fetch(i,{headers:{Authorization:"Bearer "+t}}),r=await o.text();return o.status!=200||r!=="Success"?(confirm("Error: "+r),!1):!0}const ho={props:{userID:String,isModerator:Boolean},computed:{...R(S,["accessToken"]),...R(S,["isAdmin"])},methods:{async toggleModerator(){await uo(this.$api_server_url,this.accessToken,this.userID,!this.isModerator)}}};function fo(e,t,n,s,i,o){return e.isAdmin?(c(),h("button",{key:0,class:K(n.isModerator?"remove-moderator-button":"make-moderator-button"),onClick:t[0]||(t[0]=(...r)=>o.toggleModerator&&o.toggleModerator(...r))},I(n.isModerator?"Remove":"Make")+" Moderator",3)):y("",!0)}const Rs=E(ho,[["render",fo],["__scopeId","data-v-b49015b3"]]);async function po(e,t,n,s){const i=`${e}set_user_info_admin/${n}?complexity_override=${s}`,o=await fetch(i,{headers:{Authorization:"Bearer "+t}}),r=await o.text();return o.status!=200||r!=="Success"?(confirm("Error: "+r),!1):!0}const _o={props:{userID:String},data(){return{showPopup:!1,complexity:0}},computed:{...R(S,["accessToken"]),...R(S,["isAdmin"])},methods:{async setComplexity(e){await po(this.$api_server_url,this.accessToken,this.userID,e),this.showPopup=!1}}},mo={key:1,class:"complexity-override-popup"},vo=["value"];function yo(e,t,n,s,i,o){return c(),h(H,null,[e.isAdmin?(c(),h("button",{key:0,class:"complexity-override-button",onClick:t[0]||(t[0]=r=>i.showPopup=!0)},"Set Complexity")):y("",!0),i.showPopup?(c(),h("div",mo,[p("input",{class:"complexity-override-input",min:"0",type:"number",name:"complexity",id:"complexity",value:i.complexity,onInput:t[1]||(t[1]=r=>i.complexity=r.target.value)},null,40,vo),p("div",null,[p("button",{class:"complexity-reset-button",onClick:t[2]||(t[2]=r=>o.setComplexity(0))},"Reset"),p("button",{class:"complexity-override-button",onClick:t[3]||(t[3]=r=>o.setComplexity(i.complexity))},"Set Complexity")])])):y("",!0)],64)}const go=E(_o,[["render",yo],["__scopeId","data-v-9ff70339"]]);async function bo(e,t,n,s){const i=await fetch(e+"add_purchase_admin?user_id="+n+"&version=3&sku="+s,{headers:{Authorization:"Bearer "+t}}),o=await i.text();return i.status!=200||o!=="Success"?(confirm("Error: "+o),!1):!0}async function wo(e){const t=await fetch(e+"get_shop_products?version=3"),n=await t.text();return t.status!=200?!1:JSON.parse(n)}const ko={props:{userID:String},data(){return{cosmeticID:null,showModal:!1}},computed:{...R(S,["accessToken"]),...R(S,["isAdmin"])},methods:{async giftCosmetic(){await bo(this.$api_server_url,this.accessToken,this.userID,this.cosmeticID),this.showModal=!1},async getCosmeticPacks(){const e=await wo(this.$api_server_url);this.cosmeticPacks=Object.keys(e)}},created(){this.isAdmin&&this.getCosmeticPacks()}},So={key:1,class:"cosmetic-picker"},Co=["value"];function Lo(e,t,n,s,i,o){return c(),h(H,null,[e.isAdmin?(c(),h("button",{key:0,class:"gift-button",onClick:t[0]||(t[0]=r=>i.showModal=!0)},"Gift Cosmetic")):y("",!0),i.showModal?(c(),h("div",So,[pe(p("select",{name:"cosmetic-options",id:"cosmetic-options","onUpdate:modelValue":t[1]||(t[1]=r=>i.cosmeticID=r)},[(c(!0),h(H,null,te(e.cosmeticPacks,r=>(c(),h("option",{key:r,value:r},I(r),9,Co))),128))],512),[[us,i.cosmeticID]]),p("button",{class:"gift-button",onClick:t[2]||(t[2]=(...r)=>o.giftCosmetic&&o.giftCosmetic(...r))},"Gift Cosmetic")])):y("",!0)],64)}const Io=E(ko,[["render",Lo],["__scopeId","data-v-30d01673"]]);const To={props:{info:Object},computed:{isBan(){return this.info.type==="ban"},cleanInfo(){let e=this.info;return"date_end"in e&&!this.isBan&&delete e.date_end,Object.entries(e).map(function(t){return t[0].includes("date_")?[t[0].slice(5),new Date(t[1]).toDateString()]:t})}}},Ao=e=>(le("data-v-e8e1197b"),e=e(),ce(),e),Po={class:"moderation-info"},Mo=Ao(()=>p("br",null,null,-1));function Ro(e,t,n,s,i,o){return c(),h("div",Po,[(c(!0),h(H,null,te(o.cleanInfo,r=>(c(),h("div",null,I(r[0])+": "+I(r[1]),1))),256)),Mo])}const Es=E(To,[["render",Ro],["__scopeId","data-v-e8e1197b"]]);async function Eo(e,t,n,s){const i=n.split(":"),o=i[0]+"/"+i[1],r=await fetch(e+"report/"+o+"?reason="+s,{headers:{Authorization:"Bearer "+t}}),a=await r.text();return r.status!=200||a!=="Success"?(confirm("Error: "+a),!1):!0}async function Bs(e,t,n){const s=n.split(":"),i=s[0]+"/"+s[1],o=await fetch(e+"hide/"+i,{headers:{Authorization:"Bearer "+t}}),r=await o.text();return o.status!=200||r!=="Success"?(confirm("Error: "+r),r==="Scheduled for deletion!"):!0}async function He(e,t,n){const s=await fetch(e+"reports_reset/"+n,{headers:{Authorization:"Bearer "+t}}),i=await s.text();return s.status!=200||i!=="Success"?(confirm("Error: "+i),!1):!0}async function Je(e,t,n,s,i=void 0,o=void 0){let r="";s==="level_glitch"?r+="?reason=message&type=message&message=A+level+you+published+relies+on+a+glitch+that+is+not+working+anymore.+If+you+fix+the+level,+please+let+me+know+through+discord+or+tiktok+to+make+it+available+again.":o!==void 0&&o!==""?r+="?reason=message&type=message&message="+o:r+="?reason="+s,i&&i>0&&(r+="&type=ban&duration="+i);const a=await fetch(e+"moderation_action/"+n+r,{headers:{Authorization:"Bearer "+t}}),u=await a.text();return a.status!=200||u!=="Success"?(confirm("Error: "+u),!1):!0}async function It(e,t){const n=await fetch(e+"details/"+t.split(":").join("/")),s=await n.text();return n.status!=200?(confirm("Error: "+s),!1):JSON.parse(s)}const Bo={emits:["close","handled"],props:{show:Boolean,config:String,identifier:String},inject:["bestReason"],data(){return{currentSelection:"",banDuration:void 0,message:""}},computed:{options(){if(this.config.includes("level_")){let e=[{reason:"level_sexual",title:"Sexual Content / Genitals"},{reason:"level_violence",title:"Detailed Violence"},{reason:"level_hatespeech",title:"Inappropriate Language"},{reason:"level_loweffort",title:"Very low effort level"},{reason:"level_tips",title:"Asking for Tips"},{reason:"level_other",title:"Other"}];return this.isSuperModerator&&this.config==="level_hide"&&e.push({reason:"no_punish",title:"Don't punish"}),e}else return[{reason:"user_hatespeech",title:"Inappropriate Language"},{reason:"user_behavior",title:"Inappropriate Behavior"},{reason:"user_noise",title:"Loud music / Screeching / other weird noises"},{reason:"user_editor",title:"Building inappropriate things in the editor"},{reason:"user_tips",title:"Repeatedly asking for Tips"},{reason:"user_other",title:"Other"}]},...R(S,["accessToken"]),...R(S,["isSuperModerator"])},created(){this.bestReason&&(this.currentSelection=(this.config.includes("level_")?"level_":"user_")+this.bestReason)},methods:{async doModerationAction(){const e=this.currentSelection;if(this.$emit("close"),this.config==="level_hide"){if(!await Bs(this.$api_server_url,this.accessToken,this.identifier))return;let t=e==="no_punish";if(e==="level_tips"){const s=await It(this.$api_server_url,this.identifier);s&&"levellist_newest_key"in s&&864e13-s.levellist_newest_key.split(":")[0]<new Date("April 15, 2024 00:00:00")&&(t=!0)}const n=this.identifier.split(":")[0];if((!t||this.message)&&!await Je(this.$api_server_url,this.accessToken,n,e,0,this.message)||!await He(this.$api_server_url,this.accessToken,n))return}else if(this.config==="level_report"){if(!await Eo(this.$api_server_url,this.accessToken,this.identifier,e.replace("level_","")))return}else if(this.config==="user_ban"){const t=this.banDuration*24*60*60;if(!await Je(this.$api_server_url,this.accessToken,this.identifier,e,t)||!await He(this.$api_server_url,this.accessToken,this.identifier))return}this.$emit("handled",!0)}}},xo=e=>(le("data-v-b81b26dc"),e=e(),ce(),e),Do={key:0,class:"modal-mask"},$o={class:"modal-container"},Oo={key:0,class:"modal-header"},Uo={key:1,class:"modal-header"},No={key:2,class:"modal-header"},jo={key:3,class:"modal-header"},Ho={class:"modal-body"},qo=xo(()=>p("option",{value:""},"- Select -",-1)),Vo=["id","value"],Fo={class:"modal-footer"};function Go(e,t,n,s,i,o){return c(),x(cn,{name:"modal"},{default:ln(()=>[n.show?(c(),h("div",Do,[p("div",$o,[n.config==="level_hide"?(c(),h("div",Oo,"Hide Level")):n.config==="level_report"?(c(),h("div",Uo,"Report Level")):n.config==="user_report"?(c(),h("div",No,"Report User")):n.config==="user_ban"?(c(),h("div",jo,"Ban User")):y("",!0),p("div",Ho,[p("form",null,[pe(p("select",{style:{width:"70%"},"onUpdate:modelValue":t[0]||(t[0]=r=>i.currentSelection=r)},[qo,(c(!0),h(H,null,te(o.options,r=>(c(),h("option",{id:r.reason,value:r.reason},I(r.title),9,Vo))),256))],512),[[us,i.currentSelection]]),n.config==="level_hide"?pe((c(),h("textarea",{key:0,"onUpdate:modelValue":t[1]||(t[1]=r=>i.message=r),id:"message",placeholder:"Optional Message"},null,512)),[[Ut,i.message]]):y("",!0),n.config==="user_ban"?pe((c(),h("input",{key:1,"onUpdate:modelValue":t[2]||(t[2]=r=>i.banDuration=r),type:"number",style:{width:"70%"},placeholder:"Duration (days)"},null,512)),[[Ut,i.banDuration]]):y("",!0)])]),p("div",Fo,[p("button",{class:"modal-default-button",onClick:t[3]||(t[3]=(...r)=>o.doModerationAction&&o.doModerationAction(...r))},"OK"),p("button",{class:"modal-default-button",onClick:t[4]||(t[4]=r=>e.$emit("close",!1))},"CANCEL")])])])):y("",!0)]),_:1})}const dt=E(Bo,[["render",Go],["__scopeId","data-v-b81b26dc"]]);async function zo(e,t,n){const s=await fetch(e+"moderation_action_remove/"+n,{headers:{Authorization:"Bearer "+t}}),i=await s.text();return s.status!=200||i!=="Success"?(confirm("Error: "+i),!1):!0}const Yo={components:{ModerationInfo:Es,ModerationPopup:dt,SetCreatorButton:Ps,SetVerifierButton:Ms,SetModeratorButton:Rs},emits:["handled"],props:{userInfo:Object,userPage:Boolean},data(){return{showModerationPopup:!1}},computed:{popupConfig(){return"user_ban"},...R(S,["accessToken"])},methods:{handledModerationPopup(e){e===!0&&this.$emit("handled",!0)},async removeModerationAction(){const e=this.userInfo.user_id;await zo(this.$api_server_url,this.accessToken,e)&&this.$emit("handled",!1)}}},xs=e=>(le("data-v-ae59029d"),e=e(),ce(),e),Ko={class:"moderation-tools"},Wo={key:0,class:"moderation-title"},Xo=xs(()=>p("br",null,null,-1)),Zo={class:"punish-buttons"},Jo=xs(()=>p("br",null,null,-1)),Qo={key:2,class:"promote-buttons"};function er(e,t,n,s,i,o){const r=M("ModerationInfo"),a=M("SetCreatorButton"),u=M("SetVerifierButton"),f=M("SetModeratorButton"),d=M("ModerationPopup");return c(),h(H,null,[p("div",Ko,[n.userInfo.moderation_info&&!n.userPage?(c(),h("div",Wo,"Current Strike:")):y("",!0),n.userInfo.moderation_info&&!n.userPage?(c(),x(r,{key:1,info:n.userInfo.moderation_info},null,8,["info"])):y("",!0),Xo,p("div",Zo,[p("button",{class:"moderation-hide-button",onClick:t[0]||(t[0]=_=>i.showModerationPopup=!0)},"Punish"),p("button",{class:"moderation-approve-button",onClick:t[1]||(t[1]=(..._)=>o.removeModerationAction&&o.removeModerationAction(..._))},"Remove Strike")]),Jo,n.userPage?y("",!0):(c(),h("div",Qo,[J(a,{userID:this.userInfo.user_id,isCreator:this.userInfo.is_creator},null,8,["userID","isCreator"]),J(u,{userID:this.userInfo.user_id,isVerifier:this.userInfo.is_verifier},null,8,["userID","isVerifier"]),J(f,{userID:this.userInfo.user_id,isModerator:this.userInfo.is_moderator},null,8,["userID","isModerator"])]))]),(c(),x(lt,{to:"body"},[J(d,{show:i.showModerationPopup,onClose:t[2]||(t[2]=_=>i.showModerationPopup=!1),onHandled:o.handledModerationPopup,config:o.popupConfig,identifier:n.userInfo.user_id},null,8,["show","onHandled","config","identifier"])]))],64)}const Ds=E(Yo,[["render",er],["__scopeId","data-v-ae59029d"]]);async function tr(e,t,n){const s=await fetch(e+"get_user_info_admin?user_id="+n,{headers:{Authorization:"Bearer "+t}}),i=await s.text();if(s.status!=200)return confirm("Error: "+i),!1;const o=JSON.parse(i),r=[],a=o.purchase_history_length;for(let u=0;u<a;u++)r.push(o[`purchase_history_${u}`]);return r}const sr={props:{userID:String,show:Boolean},data(){return{history:[]}},computed:{...R(S,["accessToken"])},async mounted(){this.show&&(this.history=(await tr(this.$api_server_url,this.accessToken,this.userID)).reverse())},methods:{timeString(e){const t=new Date(e.date),s=new Date().getTime()-t.getTime(),i=Math.floor(s/(1e3*60*60*24*365)),o=Math.floor(s/(1e3*60*60*24*(365/12))),r=Math.floor(s/(1e3*60*60*24*7)),a=Math.floor(s/(1e3*60*60*24)),u=Math.floor(s%(1e3*60*60*24)/(1e3*60*60)),f=Math.floor(s%(1e3*60*60)/(1e3*60)),d=String(t.getDate()).padStart(2,"0"),_=String(t.getMonth()+1).padStart(2,"0"),m=String(t.getFullYear()).slice(-2),g=`${d}/${_}/${m}`;let b="Just now";return i>0?b=`${i} ${i!=1?"years":"year"} ago`:o>0?b=`${o} ${o!=1?"months":"month"} ago`:r>0?b=`${r} ${r!=1?"weeks":"week"} ago`:a>0?b=`${a} ${a!=1?"days":"day"} ago`:u>0?b=`${u} ${u!=1?"hours":"hour"} ago`:f>0&&(b=`${f} ${f!=1?"minutes":"minute"} ago`),`${g} (${b})`}}},nr=e=>(le("data-v-6c34b217"),e=e(),ce(),e),ir=nr(()=>p("h3",null,"Purchases",-1)),or={class:"history"},rr={class:"item-id"};function ar(e,t,n,s,i,o){return c(),h(H,null,[ir,p("div",or,[(c(!0),h(H,null,te(i.history,(r,a)=>(c(),h("div",{key:a,class:"history-item"},[p("div",null,[p("h4",null,[ct(I(r.title)+" ",1),p("span",rr,I(r.platform_receipt_id),1)]),p("span",null,I(this.timeString(r)),1)]),p("h3",null,I(r.price)+" "+I(r.price_currency),1)]))),128))])],64)}const lr=E(sr,[["render",ar],["__scopeId","data-v-6c34b217"]]);async function cr(e,t,n){const s=await fetch(e+"get_user_info_admin?user_id="+n,{headers:{Authorization:"Bearer "+t}}),i=await s.text();if(s.status!=200)return confirm("Error: "+i),!1;const o=JSON.parse(i),r=[],a=o.moderation_history_length;for(let u=0;u<a;u++)r.push(o[`moderation_history_${u}`]);return r}const ur={props:{userID:String,show:Boolean},data(){return{history:[]}},computed:{...R(S,["accessToken"])},async mounted(){this.show&&(this.history=(await cr(this.$api_server_url,this.accessToken,this.userID)).reverse())},methods:{timeString(e){const t=new Date(e.date_start),s=new Date().getTime()-t.getTime(),i=Math.floor(s/(1e3*60*60*24*365)),o=Math.floor(s/(1e3*60*60*24*(365/12))),r=Math.floor(s/(1e3*60*60*24*7)),a=Math.floor(s/(1e3*60*60*24)),u=Math.floor(s%(1e3*60*60*24)/(1e3*60*60)),f=Math.floor(s%(1e3*60*60)/(1e3*60)),d=String(t.getDate()).padStart(2,"0"),_=String(t.getMonth()+1).padStart(2,"0"),m=String(t.getFullYear()).slice(-2),g=`${d}/${_}/${m}`;let b="Just now";return i>0?b=`${i} ${i!=1?"years":"year"} ago`:o>0?b=`${o} ${o!=1?"months":"month"} ago`:r>0?b=`${r} ${r!=1?"weeks":"week"} ago`:a>0?b=`${a} ${a!=1?"days":"day"} ago`:u>0?b=`${u} ${u!=1?"hours":"hour"} ago`:f>0&&(b=`${f} ${f!=1?"minutes":"minute"} ago`),`${g} (${b})`},getLength(e,t){const n=Math.floor((t-e)/864e5);return`${n} ${n!=1?"days":"day"}`}}},dr=e=>(le("data-v-d708b43e"),e=e(),ce(),e),hr=dr(()=>p("h3",null,"Moderation History",-1)),fr={class:"history"},pr={class:"item-id"};function _r(e,t,n,s,i,o){return c(),h(H,null,[hr,p("div",fr,[(c(!0),h(H,null,te(i.history,(r,a)=>(c(),h("div",{key:a,class:"history-item"},[p("div",null,[p("h4",null,[ct(I(r.type)+" ",1),p("span",pr,I(r.reason),1)]),p("span",null,I(this.timeString(r)),1)]),p("div",null,[p("h3",null,"Strike "+I(r.strike),1),p("h3",null,I(this.getLength(r.date_start,r.date_end)),1)])]))),128))])],64)}const mr=E(ur,[["render",_r],["__scopeId","data-v-d708b43e"]]);async function $s(e,t){const n=new URLSearchParams(window.location.search),s=t||n.get("user_id"),i=await fetch(e+"get_user_info?user_id="+s),o=await i.text();return i.status!=200?(confirm("Error: "+o),!1):JSON.parse(o)}async function vr(e,t){const n=await fetch(e+"get_user_currency_info?access_token="+t),s=await n.text();return n.status!=200?!1:JSON.parse(s)}const Tt="/assets/creator-bde98776.png",At="/assets/moderator-34ebe7a6.png";const yr={components:{SetCreatorButton:Ps,SetVerifierButton:Ms,SetModeratorButton:Rs,GiftCosmeticButton:Io,UserModerationTools:Ds,PurchaseHistory:lr,ModerationHistory:mr,SetComplexityOverrideButton:go},props:{otherUserID:String},computed:{...R(S,["userID"]),...R(S,["isAdmin"]),...R(S,["isSuperModerator"]),...R(S,["accessToken"])},data(){return{name:void 0,identifier:void 0,count:void 0,isVerified:!1,isVerifier:!1,isModerator:!1,currencyData:void 0,loaded:!1,userInfo:void 0,showPurchaseHistory:!1,showModerationHistory:!1}},methods:{async updateDetails(){this.count=void 0,this.name=void 0,this.identifier=void 0,this.isVerified=!1,this.isVerifier=!1,this.isModerator=!1,this.loaded=!1,this.currencyData=void 0;const e=this.otherUserID?this.otherUserID:this.userID;if(!e)return;this.userID==e&&(this.currencyData=await vr(this.$api_server_url,this.accessToken));const t=await $s(this.$api_server_url,e);t===!1||e!==(this.otherUserID?this.otherUserID:this.userID)||(console.log(t),this.userInfo=t,this.identifier=t.user_id,this.count=t.user_level_count,this.name=t.user_name,this.isVerified=t.is_creator,this.isVerifier=t.is_verifier,this.isModerator=t.is_moderator,this.loaded=!0)}},created(){this.updateDetails()},watch:{otherUserID(e){this.updateDetails()}}},gr={class:"user-tab-title-container"},br={key:0,class:"user-tab-name"},wr={key:0,alt:"Creator",title:"Creator",class:"creator-icon",src:Tt},kr={key:1,alt:"Moderator",title:"Moderator",class:"moderator-icon",src:At},Sr={key:1,class:"user-tab-count"},Cr={class:"user-buttons"},Lr=["href"],Ir={key:0,class:"user-tab-currency-container"},Tr={class:"user-tab-currency"},Ar={class:"user-tab-total-tips"},Pr={key:0,class:"user-tab-unclaimed-tips"},Mr={key:1,class:"user-tab-admin-container"},Rr={class:"user-buttons"},Er={key:2,class:"user-tab-moderation-container"};function Br(e,t,n,s,i,o){const r=M("SetCreatorButton"),a=M("SetVerifierButton"),u=M("SetModeratorButton"),f=M("GiftCosmeticButton"),d=M("SetComplexityOverrideButton"),_=M("UserModerationTools"),m=M("PurchaseHistory"),g=M("ModerationHistory");return c(),h(H,null,[p("div",gr,[i.name?(c(),h("div",br,[ct(I(i.name)+" ",1),i.isVerified?(c(),h("img",wr)):y("",!0),i.isModerator?(c(),h("img",kr)):y("",!0)])):y("",!0),i.count?(c(),h("div",Sr,I(i.count)+" level"+I(i.count>1?"s":""),1)):y("",!0),p("div",Cr,[i.loaded?(c(),h("a",{key:0,class:"player-button",href:"player?user_id="+i.identifier},"View",8,Lr)):y("",!0)])]),i.currencyData?(c(),h("div",Ir,[p("div",Tr,I(i.currencyData.currency)+" coin"+I(i.currencyData.currency>1?"s":""),1),p("div",Ar," ("+I(i.currencyData.tips_total)+" tip"+I(i.currencyData.tips_total>1?"s":"")+") ",1),i.currencyData.tips&&i.currencyData.tips>0?(c(),h("div",Pr,I(i.currencyData.tips)+" unclaimed tip"+I(i.currencyData.tips>1?"s":"")+"! ",1)):y("",!0)])):y("",!0),i.loaded&&e.isAdmin?(c(),h("div",Mr,[p("div",Rr,[i.loaded?(c(),x(r,{key:0,userID:i.identifier,isCreator:i.isVerified},null,8,["userID","isCreator"])):y("",!0),i.loaded?(c(),x(a,{key:1,userID:i.identifier,isVerifier:i.isVerifier},null,8,["userID","isVerifier"])):y("",!0),i.loaded?(c(),x(u,{key:2,userID:i.identifier,isModerator:i.isModerator},null,8,["userID","isModerator"])):y("",!0),i.loaded?(c(),x(f,{key:3,userID:i.identifier},null,8,["userID"])):y("",!0),i.loaded?(c(),x(d,{key:4,userID:i.identifier},null,8,["userID"])):y("",!0),p("button",{class:"history-button",onClick:t[0]||(t[0]=b=>this.showPurchaseHistory=!this.showPurchaseHistory)},"Purchase History"),p("button",{class:"history-button",onClick:t[1]||(t[1]=b=>this.showModerationHistory=!this.showModerationHistory)},"Moderation History")])])):y("",!0),i.loaded&&(e.isSuperModerator||e.isAdmin)?(c(),h("div",Er,[i.loaded&&(e.isSuperModerator||e.isAdmin)?(c(),x(_,{key:0,"user-info":i.userInfo,"user-page":!0},null,8,["user-info"])):y("",!0)])):y("",!0),i.showPurchaseHistory&&i.loaded&&e.isAdmin?(c(),x(m,{key:3,userID:i.identifier,show:i.showPurchaseHistory},null,8,["userID","show"])):y("",!0),i.showModerationHistory&&i.loaded&&e.isAdmin?(c(),x(g,{key:4,userID:i.identifier,show:i.showModerationHistory},null,8,["userID","show"])):y("",!0)],64)}const xr=E(yr,[["render",Br],["__scopeId","data-v-79ee245b"]]);async function Dr(e,t,n){const s=await fetch(e+"report_info/"+t.split(":").join("/"),{headers:{Authorization:"Bearer "+n}}),i=await s.text();return s.status!=200?(confirm("Error: "+i),!1):JSON.parse(i)}var $r=Object.defineProperty,Or=Object.defineProperties,Ur=Object.getOwnPropertyDescriptors,ns=Object.getOwnPropertySymbols,Nr=Object.prototype.hasOwnProperty,jr=Object.prototype.propertyIsEnumerable,is=(e,t,n)=>t in e?$r(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Hr=(e,t)=>{for(var n in t||(t={}))Nr.call(t,n)&&is(e,n,t[n]);if(ns)for(var n of ns(t))jr.call(t,n)&&is(e,n,t[n]);return e},qr=(e,t)=>Or(e,Ur(t)),Vr={props:{src:{type:String,required:!0},srcPlaceholder:{type:String,default:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"},srcset:{type:String},intersectionOptions:{type:Object,default:()=>({})},usePicture:{type:Boolean,default:!1}},inheritAttrs:!1,setup(e,{attrs:t,slots:n,emit:s}){const i=cs(null),o=St({observer:null,intersected:!1,loaded:!1}),r=ie(()=>o.intersected&&e.src?e.src:e.srcPlaceholder),a=ie(()=>o.intersected&&e.srcset?e.srcset:!1),u=()=>{i.value&&i.value.getAttribute("src")!==e.srcPlaceholder&&(o.loaded=!0,s("load",i.value))},f=()=>s("error",i.value);return un(()=>{"IntersectionObserver"in window&&(o.observer=new IntersectionObserver(d=>{d[0].isIntersecting&&(o.intersected=!0,o.observer.disconnect(),s("intersect"))},e.intersectionOptions),o.observer.observe(i.value))}),dn(()=>{"IntersectionObserver"in window&&o.observer&&o.observer.disconnect()}),()=>{const d=rt("img",qr(Hr({ref:i,src:r.value,srcset:a.value||null},t),{class:[t.class,"v-lazy-image",{"v-lazy-image-loaded":o.loaded}],onLoad:u,onError:f}));return e.usePicture?rt("picture",{ref:i,onLoad:u},o.intersected?[n.default,d]:[d]):d}}};async function Fr(e,t,n){const s=n.split(":"),i=s[0]+"/"+s[1],o=await fetch(e+"ignore_reports/"+i,{headers:{Authorization:"Bearer "+t}}),r=await o.text();return o.status!=200||r!=="Success"?(confirm("Error: "+r),!1):!0}const Gr={components:{ModerationInfo:Es,ModerationPopup:dt},emits:["handled"],props:{moderationItem:Object},data(){return{showModerationPopup:!1}},computed:{reports(){return Object.entries(this.moderationItem).filter(([e])=>e.includes("reported_score_"))},isLevel(){return this.moderationItem.object_type==="level"},popupConfig(){return this.isLevel?"level_hide":"user_ban"},bestReason(){let e="",t=0;for(var n in this.moderationItem)n.startsWith("reported_score_")&&this.moderationItem[n]>t&&(t=this.moderationItem[n],e=n.slice(15));return e},...R(S,["accessToken"])},methods:{handledModerationPopup(e){e===!0&&this.$emit("handled",!0)},async approveLevel(){await Fr(this.$api_server_url,this.accessToken,this.moderationItem.object_info.identifier)&&this.$emit("handled",!1)},async punishUser(){const e=this.moderationItem.object_info.user_id;e&&await Je(this.$api_server_url,this.accessToken,e,"user_"+this.bestReason)&&await He(this.$api_server_url,this.accessToken,e)&&this.$emit("handled",!0)},async resetUserReports(){const e=this.moderationItem.object_info.user_id;await He(this.$api_server_url,this.accessToken,e)&&this.$emit("handled",!1)}}},zr=e=>(le("data-v-ccb68b40"),e=e(),ce(),e),Yr={class:"moderation-tools"},Kr={key:0,class:"moderation-title"},Wr={key:2,class:"moderation-title"},Xr=zr(()=>p("br",null,null,-1));function Zr(e,t,n,s,i,o){const r=M("ModerationInfo"),a=M("ModerationPopup");return c(),h(H,null,[p("div",Yr,[n.moderationItem.object_info.moderation_info?(c(),h("div",Kr,"Previous Strike:")):y("",!0),n.moderationItem.object_info.moderation_info?(c(),x(r,{key:1,info:n.moderationItem.object_info.moderation_info},null,8,["info"])):y("",!0),o.reports.length?(c(),h("div",Wr,"Reports:")):y("",!0),(c(!0),h(H,null,te(o.reports,u=>(c(),h("div",null,I(u[0].slice(15))+": "+I(u[1]),1))),256)),Xr,o.isLevel?(c(),h("button",{key:3,class:"moderation-hide-button",onClick:t[0]||(t[0]=u=>i.showModerationPopup=!0)},"Hide")):(c(),h("button",{key:4,class:"moderation-hide-button",onClick:t[1]||(t[1]=(...u)=>o.punishUser&&o.punishUser(...u))},"Punish")),o.isLevel?(c(),h("button",{key:5,class:"moderation-approve-button",onClick:t[2]||(t[2]=(...u)=>o.approveLevel&&o.approveLevel(...u))},"Approve")):(c(),h("button",{key:6,class:"moderation-approve-button",onClick:t[3]||(t[3]=(...u)=>o.resetUserReports&&o.resetUserReports(...u))},"Reset"))]),(c(),x(lt,{to:"body"},[J(a,{show:i.showModerationPopup,onClose:t[4]||(t[4]=u=>i.showModerationPopup=!1),onHandled:o.handledModerationPopup,config:o.popupConfig,identifier:n.moderationItem.object_info.identifier},null,8,["show","onHandled","config","identifier"])]))],64)}const Os=E(Gr,[["render",Zr],["__scopeId","data-v-ccb68b40"]]);async function Jr(e,t,n,s,i){const o=n.split(":");let r="?";s&&(r+="mod_tags="+s.join(",")),s&&i&&(r+="&"),i&&(r+="tags="+i.join(","));const a=await fetch(e+"tag/"+o[0]+"/"+o[1]+r,{headers:{Authorization:"Bearer "+t}}),u=await a.text();return a.status!=200||u!=="Success"?(confirm("Error: "+u),!1):!0}async function Us(e,t,n){const s=n.split(":"),i=s[0]+"/"+s[1],o=await fetch(e+"remove_from_verification_queue/"+i,{headers:{Authorization:"Bearer "+t}}),r=await o.text();return o.status!=200||r!=="Success"?(confirm("Error: "+r),!1):!0}const Qr={props:{levelInfo:Object},data(){return{isVerified:!1,isLoading:!1}},created(){var e,t;this.isVerified=((t=(e=this.levelInfo)==null?void 0:e.tags)==null?void 0:t.includes("ok"))??!1},computed:{...R(S,["accessToken"])},methods:{async toggleVerifyLevel(){if(this.isLoading)return;this.isLoading=!0;let e=[];this.isVerified||e.push("ok");const t=this.isVerified;if(this.isVerified=!this.isVerified,!await Jr(this.$api_server_url,this.accessToken,this.levelInfo.identifier,e,void 0)){this.isVerified=t;return}this.isLoading=!1,await Us(this.$api_server_url,this.accessToken,this.levelInfo.identifier)}}};function ea(e,t,n,s,i,o){return c(),h("div",null,[i.isVerified?(c(),h("button",{key:0,class:"moderation-unverify-button",onClick:t[0]||(t[0]=(...r)=>o.toggleVerifyLevel&&o.toggleVerifyLevel(...r))},"Unverify")):(c(),h("button",{key:1,class:"moderation-verify-button",onClick:t[1]||(t[1]=(...r)=>o.toggleVerifyLevel&&o.toggleVerifyLevel(...r))},"Verify"))])}const ta=E(Qr,[["render",ea],["__scopeId","data-v-43db5529"]]);const sa={props:{levelInfo:Object},data(){return{isSkipped:!1,isLoading:!1}},computed:{...R(S,["accessToken"])},methods:{async skipLevel(){this.isLoading||(this.isLoading=!0,await Us(this.$api_server_url,this.accessToken,this.levelInfo.identifier),this.isSkipped=!0,this.isLoading=!1)}}},na={class:"moderation-skip-level-button-container"};function ia(e,t,n,s,i,o){return c(),h("div",na,[i.isSkipped?y("",!0):(c(),h("button",{key:0,class:"moderation-skip-level-button",onClick:t[0]||(t[0]=(...r)=>o.skipLevel&&o.skipLevel(...r))},"Skip"))])}const oa=E(sa,[["render",ia],["__scopeId","data-v-e0654c41"]]);const ra={components:{ModerationPopup:dt},emits:["handled"],props:{level_id:String},data(){return{showModerationPopup:!1}},methods:{handledModerationPopup(e){e===!0&&(this.$emit("handled",!0),this.$emit("hideBtn"))}}},aa={class:"moderation-hide-level-button-container"};function la(e,t,n,s,i,o){const r=M("ModerationPopup");return c(),h(H,null,[p("div",aa,[p("button",{class:"moderation-hide-level-button",onClick:t[0]||(t[0]=a=>i.showModerationPopup=!0)},"Hide")]),(c(),x(lt,{to:"body"},[J(r,{show:i.showModerationPopup,onClose:t[1]||(t[1]=a=>i.showModerationPopup=!1),onHandled:o.handledModerationPopup,config:"level_hide",identifier:n.level_id},null,8,["show","onHandled","identifier"])]))],64)}const ca=E(ra,[["render",la],["__scopeId","data-v-f68ba85b"]]);const ua={emits:["handled"],props:{level_id:String},methods:{async handlePress(e){if(!await Bs(this.$api_server_url,this.accessToken,this.level_id))return;let t=!1;const n=await It(this.$api_server_url,this.level_id);n&&"levellist_newest_key"in n&&864e13-n.levellist_newest_key.split(":")[0]<new Date("April 15, 2024 00:00:00")&&(t=!0);const s=this.level_id.split(":")[0];!t&&!await Je(this.$api_server_url,this.accessToken,s,"level_tips")||await He(this.$api_server_url,this.accessToken,s)&&this.$emit("handled",!0)}},computed:{...R(S,["accessToken"])}},da={class:"moderation-hide-level-button-container"};function ha(e,t,n,s,i,o){return c(),h("div",da,[p("button",{class:"moderation-hide-level-button",onClick:t[0]||(t[0]=(...r)=>o.handlePress&&o.handlePress(...r))},"Hide Tip")])}const fa=E(ua,[["render",ha],["__scopeId","data-v-cd9b2aeb"]]);async function pa(e,t,n){const s=n.split(":"),i=s[0]+"/"+s[1],o=await fetch(e+"show/"+i,{headers:{Authorization:"Bearer "+t}}),r=await o.text();return o.status!=200||r!=="Success"?(confirm("Error: "+r),!1):!0}const _a={emits:["handled"],props:{level_id:String},computed:{...R(S,["accessToken"])},methods:{async doModerationAction(){await pa(this.$api_server_url,this.accessToken,this.level_id)&&this.$emit("handled",!1)}}},ma={class:"moderation-unhide-level-button-container"};function va(e,t,n,s,i,o){return c(),h("div",ma,[p("button",{class:"moderation-unhide-level-button",onClick:t[0]||(t[0]=(...r)=>o.doModerationAction&&o.doModerationAction(...r))},"Unhide")])}const ya=E(_a,[["render",va],["__scopeId","data-v-ec3b35bb"]]);async function ga(e,t,n){const s=await fetch(e+"add_favorite_level?level_id="+t+"&access_token="+n);if(s.status!=200){const i=await s.text();return confirm("Error: "+i),!1}return!0}async function ba(e,t,n){const s=await fetch(e+"remove_favorite_level?level_id="+t+"&access_token="+n),i=await s.text();return s.status!=200||i!=="Success"?(confirm("Error: "+i),!1):!0}const wa="/assets/star_on-c1a81e45.svg",ka="/assets/star_off-ddb2fd9e.svg";const Sa={props:{level_id:String},computed:{...R(S,["accessToken"]),isFavorited(){return S().isFavorited(this.level_id)}},methods:{async addFavoriteLevel(){if(this.accessToken){const e=S();await ga(this.$api_server_url,this.level_id,this.accessToken)===!0&&e.addFavoriteLevel(this.level_id)}},async removeFavoriteLevel(){if(this.accessToken){const e=S();await ba(this.$api_server_url,this.level_id,this.accessToken)===!0&&e.removeFavoriteLevel(this.level_id)}}}};function Ca(e,t,n,s,i,o){return o.isFavorited?(c(),h("img",{key:0,class:"favorite-button",onClick:t[0]||(t[0]=(...r)=>o.removeFavoriteLevel&&o.removeFavoriteLevel(...r)),src:wa,alt:"Add to Favorites"})):(c(),h("img",{key:1,class:"favorite-button",onClick:t[1]||(t[1]=(...r)=>o.addFavoriteLevel&&o.addFavoriteLevel(...r)),src:ka,alt:"Remove from Favorites"}))}const La=E(Sa,[["render",Ca],["__scopeId","data-v-091b72d5"]]),Ia="/assets/report-2431cc4a.svg";const Ta={components:{ModerationPopup:dt},props:{level_id:String},data(){return{showModerationPopup:!1}}};function Aa(e,t,n,s,i,o){const r=M("ModerationPopup");return c(),h(H,null,[p("img",{class:"report-level-button",onClick:t[0]||(t[0]=a=>i.showModerationPopup=!0),src:Ia}),(c(),x(lt,{to:"body"},[J(r,{show:i.showModerationPopup,onClose:t[1]||(t[1]=a=>i.showModerationPopup=!1),config:"level_report",identifier:n.level_id,alt:"Report Level"},null,8,["show","identifier"])]))],64)}const Pa=E(Ta,[["render",Aa],["__scopeId","data-v-3f032ba1"]]);async function Ma(e,t,n){const s=n.split(":"),i=s[0]+"/"+s[1],o=await fetch(e+"remove_from_deletion_schedule/"+i,{headers:{Authorization:"Bearer "+t}}),r=await o.text();return o.status!=200||r!=="Success"?(confirm("Error: "+r),!1):!0}const Ra={props:{level_id:String},emits:["handled"],computed:{...R(S,["accessToken"])},methods:{async unscheduleDeletion(){if(!await Ma(this.$api_server_url,this.accessToken,this.level_id)){this.$emit("handled",!0);return}this.$emit("handled",!1)}}},Ea={class:"undelete-level-button-container"};function Ba(e,t,n,s,i,o){return c(),h("div",Ea,[p("button",{class:"undelete-level-button",onClick:t[0]||(t[0]=(...r)=>o.unscheduleDeletion&&o.unscheduleDeletion(...r))},"Recover")])}const xa=E(Ra,[["render",Ba],["__scopeId","data-v-61e75edb"]]);const Da={components:{ReportModerationTools:Os,VerifyLevelButton:ta,SkipLevelButton:oa,VLazyImage:Vr,HideLevelButton:ca,HideTipLevelButton:fa,UnhideLevelButton:ya,FavoriteLevelButton:La,ReportLevelButton:Pa,UnscheduleDeletionButton:xa},emit:["more"],props:{item:Object,moderationItem:Object,index:Number,listType:String,bestReason:String},data(){return{cardColor:"white",imageKeys:[],isHidden:this.item.hidden}},provide(){return{bestReason:ie(()=>this.bestReason)}},computed:{creators(){return this.item.creators&&this.item.creators.length>0?"by "+this.item.creators.join(", "):""},tags(){return this.item.tags&&this.item.tags.length>0?this.item.tags.filter(e=>e!=="ok"):[]},hasImage(){return this.item.images&&this.item.images.thumb?!0:!!(this.moderationItem&&this.moderationItem.image)},hasStatistics(){return!this.moderationItem},hasDifficulty(){return this.listType!=="tab_favorite_levels"},difficulty(){let e="unrated",t="#969696";return"statistics"in this.item&&"difficulty"in this.item.statistics&&"total_played"in this.item.statistics&&this.item.statistics.difficulty_string&&(this.item.statistics.difficulty_string=="impossible"?(e="impossible",t="#7f007f"):this.item.statistics.difficulty_string=="veryhard"?(e="very hard",t="#EA0000"):this.item.statistics.difficulty_string=="hard"?(e="hard",t="#F19400"):this.item.statistics.difficulty_string=="medium"?(e="medium",t="#E1C800"):this.item.statistics.difficulty_string=="easy"&&(e="easy",t="#2BBA84")),{difficulty:e,color:t}},viewerURL(){return"/levels/viewer/?level="+this.item.identifier},hasOKStamp(){var e;return((e=this.item.tags)==null?void 0:e.includes("ok"))??!1},isModerationCell(){return this.moderationItem!==null},...R(S,["isVerifier"]),...R(S,["isAdmin"]),...R(S,["isSuperModerator"]),...R(S,["isLoggedIn"]),...R(S,["accessToken"])},async created(){this.item.hidden===!0&&(this.cardColor="lightcoral"),this.hasImage&&this.isModerationCell&&(this.imageKeys=await this.getReportImages())},methods:{hideState(){this.isHidden=!this.isHidden},didHandleCell(e){e===!0?this.cardColor="lightcoral":this.cardColor="lightgreen"},showMoreLevels(){this.$emit("more",this.item.identifier.split(":")[0])},setListIndex(e){S().setListIndex(e)},async getReportImages(){const e=await Dr(this.$api_server_url,this.item.identifier,this.accessToken),t=[];if("images"in e)for(let n in e.images)e.images[n].key&&t.push("https://grab-images.slin.dev/"+e.images[n].key);return t}}},$a={key:3,class:"plays"},Oa={key:4},Ua={class:"title"},Na={class:"tags"},ja={class:"tag"},Ha={class:"creators"},qa={class:"description"},Va={class:"interactions"},Fa=["href"],Ga={key:12,alt:"OK Stamp",class:"stamp",src:hn,width:"453",height:"180"};function za(e,t,n,s,i,o){const r=M("v-lazy-image"),a=M("VerifyLevelButton"),u=M("SkipLevelButton"),f=M("HideLevelButton"),d=M("HideTipLevelButton"),_=M("UnhideLevelButton"),m=M("UnscheduleDeletionButton"),g=M("ReportModerationTools"),b=M("FavoriteLevelButton"),B=M("ReportLevelButton");return c(),h("div",{class:"level-card",style:Oe({"background-color":i.cardColor})},[o.hasImage&&!o.isModerationCell?(c(),x(r,{key:0,class:"thumbnail","intersection-options":{rootMargin:"50%"},src:this.$images_server_url+this.item.images.thumb.key,width:this.item.images.thumb.width,height:this.item.images.thumb.height},null,8,["src","width","height"])):y("",!0),o.hasImage&&o.isModerationCell?(c(),h("div",{key:1,class:K("moderation-images"+(this.imageKeys.length>1?" moderation-images-multiple":""))},[(c(!0),h(H,null,te(this.imageKeys,C=>(c(),x(r,{class:"thumbnail","intersection-options":{rootMargin:"50%"},src:C,width:"512",height:"288"},null,8,["src"]))),256))],2)):y("",!0),o.hasStatistics&&o.hasDifficulty?(c(),h("div",{key:2,style:Oe({color:o.difficulty.color}),class:"difficulty"},I(o.difficulty.difficulty),5)):y("",!0),o.hasStatistics&&n.item.statistics?(c(),h("div",$a,"plays: "+I(n.item.statistics.total_played),1)):y("",!0),o.hasStatistics?(c(),h("br",Oa)):y("",!0),p("div",Ua,I(n.item.title),1),p("div",Na,[o.tags!=[]?(c(!0),h(H,{key:0},te(o.tags,C=>(c(),h("span",ja,I(C),1))),256)):y("",!0)]),p("div",Ha,I(o.creators),1),p("div",{class:"more-button",onClick:t[0]||(t[0]=(...C)=>o.showMoreLevels&&o.showMoreLevels(...C))},"More Levels"),p("div",qa,I(n.item.description),1),e.isVerifier&&this.listType!=="tab_deletion_queue"?(c(),x(a,{key:5,"level-info":n.item},null,8,["level-info"])):y("",!0),e.isVerifier&&this.listType==="tab_verify_queue"?(c(),x(u,{key:6,"level-info":n.item},null,8,["level-info"])):y("",!0),!i.isHidden&&(e.isSuperModerator||e.isAdmin)&&!o.isModerationCell&&this.listType!=="tab_verify_queue"&&this.listType!=="tab_deletion_queue"?pe((c(),x(f,{key:7,level_id:n.item.identifier,onHandled:o.didHandleCell,onHideBtn:o.hideState},null,8,["level_id","onHandled","onHideBtn"])),[[Ue,!i.isHidden]]):y("",!0),e.isAdmin&&!o.isModerationCell&&!i.isHidden&&this.listType!=="tab_verify_queue"?(c(),x(d,{key:8,level_id:n.item.identifier,onHandled:o.didHandleCell},null,8,["level_id","onHandled"])):y("",!0),e.isSuperModerator&&!o.isModerationCell&&this.listType!=="tab_verify_queue"?pe((c(),x(_,{key:9,level_id:n.item.identifier,onHandled:o.didHandleCell,onClick:o.hideState},null,8,["level_id","onHandled","onClick"])),[[Ue,i.isHidden]]):y("",!0),e.isSuperModerator&&this.listType==="tab_deletion_queue"?(c(),x(m,{key:10,level_id:n.item.identifier,onHandled:o.didHandleCell},null,8,["level_id","onHandled"])):y("",!0),o.isModerationCell?(c(),x(g,{key:11,"moderation-item":n.moderationItem,onHandled:o.didHandleCell},null,8,["moderation-item","onHandled"])):y("",!0),p("div",Va,[e.isLoggedIn?(c(),x(b,{key:0,level_id:n.item.identifier},null,8,["level_id"])):y("",!0),e.isLoggedIn?(c(),x(B,{key:1,level_id:n.item.identifier},null,8,["level_id"])):y("",!0)]),p("a",{target:"_blank",href:o.viewerURL+(this.listType=="tab_verify_queue"?"&verify_queue":""),class:"play-button",onClick:t[1]||(t[1]=C=>o.setListIndex(n.index))},"OPEN",8,Fa),o.hasOKStamp?(c(),h("img",Ga)):y("",!0)],4)}const Ya=E(Da,[["render",za],["__scopeId","data-v-84d900a0"]]);const Ka={components:{ReportModerationTools:Os,UserModerationTools:Ds},emit:["profile"],props:{item:Object,moderationItem:Object},data(){return{cardColor:"white"}},computed:{creators(){return this.item.creators&&this.item.creators.length>0?"by "+this.item.creators.join(", "):""},isReportModerationCell(){return this.moderationItem!==null},isUserModerationCell(){return this.moderationItem===null&&this.isSuperModerator},...R(S,["isSuperModerator"])},methods:{didHandleCell(e){e===!0?this.cardColor="lightcoral":this.cardColor="lightgreen"},showProfile(){this.$emit("profile",this.item.user_id)}}},Wa={class:"user-name"},Xa={key:0,alt:"creator",class:"creator-icon",src:Tt},Za={key:1,alt:"moderator",class:"moderator-icon",src:At},Ja={key:2,class:"level-count"},Qa={key:3,class:"user-id"};function el(e,t,n,s,i,o){const r=M("ReportModerationTools"),a=M("UserModerationTools");return c(),h("div",{class:"user-card",style:Oe({"background-color":i.cardColor})},[p("div",Wa,I(n.item.user_name),1),n.item.is_creator?(c(),h("img",Xa)):y("",!0),n.item.is_moderator?(c(),h("img",Za)):y("",!0),n.item.user_level_count?(c(),h("div",Ja,"Levels: "+I(n.item.user_level_count),1)):y("",!0),e.isAdmin?(c(),h("div",Qa,"User ID: "+I(n.item.user_id),1)):y("",!0),o.isReportModerationCell?(c(),x(r,{key:4,"moderation-item":n.moderationItem,onHandled:o.didHandleCell},null,8,["moderation-item","onHandled"])):y("",!0),o.isUserModerationCell?(c(),x(a,{key:5,"user-info":n.item,onHandled:o.didHandleCell},null,8,["user-info","onHandled"])):y("",!0),p("div",{class:"profile-button",onClick:t[0]||(t[0]=(...u)=>o.showProfile&&o.showProfile(...u))},"PROFILE")],4)}const tl=E(Ka,[["render",el],["__scopeId","data-v-1ee4bb4e"]]);const sl={props:{item:Object},computed:{logType(){return this.item.request.split("/")[5]},logDetails(){return this.item.request},logTimeString(){const e=new Date(this.item.timestamp),n=new Date().getTime()-e.getTime(),s=Math.floor(n/(1e3*60*60*24*365)),i=Math.floor(n/(1e3*60*60*24*(365/12))),o=Math.floor(n/(1e3*60*60*24*7)),r=Math.floor(n/(1e3*60*60*24)),a=Math.floor(n%(1e3*60*60*24)/(1e3*60*60)),u=Math.floor(n%(1e3*60*60)/(1e3*60)),f=String(e.getDate()).padStart(2,"0"),d=String(e.getMonth()+1).padStart(2,"0"),_=String(e.getFullYear()).slice(-2),m=`${f}/${d}/${_}`;let g="Just now";return s>0?g=`${s} ${s!=1?"years":"year"} ago`:i>0?g=`${i} ${i!=1?"months":"month"} ago`:o>0?g=`${o} ${o!=1?"weeks":"week"} ago`:r>0?g=`${r} ${r!=1?"days":"day"} ago`:a>0?g=`${a} ${a!=1?"hours":"hour"} ago`:u>0&&(g=`${u} ${u!=1?"minutes":"minute"} ago`),`${m} (${g})`}}},nl={class:"log-card"},il={class:"log-header"},ol={class:"log-type"},rl=["href"],al={key:0,alt:"Verifier",title:"Verifier",class:"icon",src:Tt},ll={key:1,alt:"Moderator",title:"Moderator",class:"icon",src:At},cl={class:"log-footer"};function ul(e,t,n,s,i,o){return c(),h("div",nl,[p("div",il,[p("h4",ol,I(this.logType),1),p("a",{class:"log-user",href:"/levels?tab=tab_other_user&user_id="+n.item.userInfo.user_id},I(n.item.userInfo.user_name),9,rl),n.item.userInfo.is_verifier?(c(),h("img",al)):y("",!0),n.item.userInfo.is_moderator?(c(),h("img",ll)):y("",!0)]),p("span",null,I(this.logDetails),1),p("div",cl,[p("span",null,I(this.logTimeString),1),p("span",null,I(n.item.valid?"successful":"invalid"),1)])])}const dl=E(sl,[["render",ul],["__scopeId","data-v-890722ec"]]);const hl={data(){return{isOpen:!1,selection:void 0}},created(){this.selection=this.defaultChoice},props:{options:{type:Array,required:!0},defaultChoice:{type:String,required:!0}},methods:{toggleDropdown(){this.isOpen=!this.isOpen},selectOption(e){this.selection=e,this.isOpen=!1,this.$emit("changeSelection",this.selection)}}},fl={class:"dropdown"},pl={key:0,class:"dropdown-content"},_l=["onClick"];function ml(e,t,n,s,i,o){return c(),h("div",fl,[p("button",{onClick:t[0]||(t[0]=(...r)=>o.toggleDropdown&&o.toggleDropdown(...r)),class:"dropdown-button"},[fn(e.$slots,"button-content",{},()=>[ct(I(i.selection),1)],!0)]),i.isOpen?(c(),h("div",pl,[(c(!0),h(H,null,te(n.options,r=>(c(),h("div",{key:r,class:"dropdown-item",onClick:a=>o.selectOption(r)},I(r),9,_l))),128))])):y("",!0)])}const Ns=E(hl,[["render",ml],["__scopeId","data-v-b8c05784"]]);const vl={components:{CardLevel:Ya,CardUser:tl,CardLog:dl,DropDown:Ns},emits:["tabChanged","loaded"],props:{listType:String,difficulty:String,tag:String,searchTerm:String,otherUserID:String},data(){return{items:[],loading:!1,isInitialLoad:!0,activeLoad:null,filterChoice:"All"}},created(){let e=this.$route.query;Object.keys(e).length===0&&(e=localStorage.getItem("currentLocation"),e?(localStorage.removeItem("currentLocation"),e=JSON.parse(e)):e={});const t=e.user_id;let n=e.tab;const s=e.search;if(n||(n="tab_newest"),t)this.$emit("tabChanged",{tab:"tab_other_user",user_id:t});else if(s&&s.length>0||n!==this.listType&&n!=="tab_featured"){let i={tab:n};s&&(i.search=s),this.$emit("tabChanged",i)}else this.loadMore()},computed:{wantsUserCells(){return["tab_search_users","tab_reported_users","tab_banned_users"].includes(this.listType)},wantsModerationUserCells(){return["tab_reported_users"].includes(this.listType)},wantsModerationLevelCells(){return["tab_reported_levels"].includes(this.listType)},filterType(){return this.filterChoice.toLowerCase()},sortedItems(){if(this.listType!=="tab_reported_levels")return this.items;let e=this.filterType;return e==="all"?this.items:[...this.items].sort((t,n)=>{const s=t[`reported_score_${e}`]||0;return(n[`reported_score_${e}`]||0)-s})},...R(S,["isLoggedIn"]),...R(S,["userID"]),...R(S,["accessToken"]),...R(S,["isAdmin"]),...R(S,["isSuperModerator"])},watch:{async listType(e){this.isInitialLoad&&this.loading||(this.items=[],this.nextPage=null,await this.loadMore())},async difficulty(e){this.isInitialLoad&&this.loading||(this.items=[],this.nextPage=null,await this.loadMore())},async tag(e){this.isInitialLoad&&this.loading||(this.items=[],this.nextPage=null,await this.loadMore())},async searchTerm(e){this.isInitialLoad&&this.loading||(this.items=[],this.nextPage=null,await this.loadMore())}},methods:{async loadLevels(){const e=await ds(this.$api_server_url,this.accessToken,this.listType,this.difficulty,this.tag,this.searchTerm,this.$max_level_format_version,this.otherUserID?this.otherUserID:this.userID,this.nextPage);return e!==!1?(e&&e.length>0?this.nextPage=e[e.length-1].page_timestamp:this.nextPage=null,this.listType==="tab_favorite_levels"?e.reverse():e):[]},async loadMore(){var s,i,o,r,a;this.activeLoad={listType:this.listType,difficulty:this.difficulty,tag:this.tag,searchTerm:this.searchTerm,otherUserID:this.otherUserID};const e=S();if(this.loading&&this.listType===((s=this.activeLoad)==null?void 0:s.listType)&&this.difficulty===((i=this.activeLoad)==null?void 0:i.difficulty)&&this.tag===((o=this.activeLoad)==null?void 0:o.tag)&&this.searchTerm===((r=this.activeLoad)==null?void 0:r.searchTerm)&&this.otherUserID===((a=this.activeLoad)==null?void 0:a.otherUserID))return;this.loading=!0;let t=await this.loadLevels();if(this.activeLoad.searchTerm!==this.searchTerm||this.activeLoad.listType!==this.listType||this.activeLoad.difficulty!==this.difficulty||this.activeLoad.tag!==this.tag||this.activeLoad.otherUserID!==this.otherUserID)return;const n=S().getProcessedList(this.listType);n&&(t=t.filter(u=>!n.includes(u))),this.items=[...this.items,...t],e.setList(this.items),this.loading=!1,this.$emit("loaded"),this.isInitialLoad=!1},handleScroll(){const e=window.scrollY,t=window.innerHeight,n=document.documentElement.scrollHeight;e+t>=n&&!this.loading&&this.nextPage!==void 0&&this.loadMore()},async showOtherUserLevels(e){this.$emit("tabChanged",{tab:"tab_other_user",user_id:e})},bestReason(e){let t="",n=0;for(var s in e)s.startsWith("reported_score_")&&e[s]>n&&(n=e[s],t=s.slice(15));return t},async punishAllUsers(){const e=this.items.map(async s=>{var d;const i=(d=s==null?void 0:s.object_info)==null?void 0:d.user_id,o=this.bestReason(s),r=S();if(!i)return{success:0};const[a,u]=await Promise.all([Je(this.$api_server_url,this.accessToken,i,"user_"+o),He(this.$api_server_url,this.accessToken,i)]);return a&&u&&r.pushProcessedList(this.listType,s),{success:a&&u?1:0}}),n=(await Promise.all(e)).reduce((s,i)=>s+i.success,0);alert(n+" users punished"),this.listType==="tab_reported_users"&&(this.items=[])},filterByReason(e){let t=this.filterType;if(t=="all")return!0;for(let n in e)if(n.startsWith("reported_score_")&&n.slice(15).toLowerCase().includes(t))return!0;return!1}},mounted(){window.addEventListener("scroll",this.handleScroll)},destroyed(){window.removeEventListener("scroll",this.handleScroll)}},yl={key:2,class:"loading"};function gl(e,t,n,s,i,o){const r=M("DropDown"),a=M("CardUser"),u=M("CardLog"),f=M("CardLevel");return c(),h(H,null,[n.listType=="tab_reported_users"&&(e.isAdmin||e.isSuperModerator)?(c(),h("button",{key:0,id:"punish-all-button",onClick:t[0]||(t[0]=(...d)=>o.punishAllUsers&&o.punishAllUsers(...d))},"Punish All")):y("",!0),n.listType=="tab_reported_levels"&&(e.isAdmin||e.isSuperModerator)?(c(),x(r,{key:1,options:["All","Sexual","Tips","Violence","Hatespeech","Glitch","Loweffort","Other"],defaultChoice:"All",onChangeSelection:t[1]||(t[1]=d=>i.filterChoice=d),style:{"margin-bottom":"5px"}})):y("",!0),p("div",{class:"grid-container",style:Oe(n.listType=="tab_audit"?"grid-template-columns: 1fr":"")},[(c(!0),h(H,null,te(o.sortedItems,(d,_)=>pe((c(),h("div",{key:_,class:"grid-item"},[o.wantsUserCells?(c(),x(a,{key:0,item:"object_info"in d?d.object_info:d,moderationItem:"object_info"in d?d:null,onProfile:o.showOtherUserLevels},null,8,["item","moderationItem","onProfile"])):n.listType=="tab_audit"?(c(),x(u,{key:1,item:d},null,8,["item"])):(c(),x(f,{key:2,item:"object_info"in d?d.object_info:d,moderationItem:"object_info"in d?d:null,bestReason:o.bestReason(d),index:_,listType:n.listType,onMore:o.showOtherUserLevels},null,8,["item","moderationItem","bestReason","index","listType","onMore"]))])),[[Ue,n.listType=="tab_reported_levels"?o.filterByReason(d):!0]])),128))],4),i.loading?(c(),h("div",yl,"Loading more items...")):y("",!0)],64)}const js=E(vl,[["render",gl],["__scopeId","data-v-43828dfb"]]);const bl={methods:{login(){localStorage.setItem("currentLocation",JSON.stringify(this.$route.query)),window.location.href="https://auth.oculus.com/sso/?redirect_uri="+this.$page_url+"/levels&organization_id=1298096256894263"},logout(){S().$reset()}},async created(){let e=null;if(window.location.hash.length>0){let n=this.$route.hash.substring(1),s=atob(n);e=JSON.parse(s),this.$router.replace({path:this.$route.path})}const t=S();await t.fetchUser(this.$api_server_url,e),await t.fetchUsersFavorites(this.$api_server_url,this.$max_level_format_version)},computed:{...R(S,["isLoggedIn"])}};function wl(e,t,n,s,i,o){return e.isLoggedIn?(c(),h("button",{key:0,class:"logout-button",type:"button",onClick:t[0]||(t[0]=(...r)=>o.logout&&o.logout(...r))},"Logout")):(c(),h("button",{key:1,class:"login-button",type:"button",onClick:t[1]||(t[1]=(...r)=>o.login&&o.login(...r))},"Login with Meta"))}const kl=E(bl,[["render",wl],["__scopeId","data-v-67127428"]]);async function Hs(e){const t=await fetch(e+"get_level_browser?version=1"),n=await t.text();return t.status!=200?!1:JSON.parse(n)}const Sl={computed:{...R(S,["accessToken"]),isSection(){return this.currentSection.hasOwnProperty("sections")},isList(){return this.currentSection.hasOwnProperty("list_key")}},components:{ScrollList:js},data(){return{featured:{},currentSection:{},displayingLevels:!1,sectionStack:[],loaded:!1}},emits:["tabChanged"],methods:{async loadFeatured(){const e=await Hs(this.$api_server_url);return e!==!1?e:[]},tabChanged(e){this.$emit("tabChanged",e)},handleBack(){this.sectionStack.length>0?this.currentSection=this.sectionStack.pop():this.currentSection=this.featured},setSection(e){if(console.log(e),e.hasOwnProperty("list_key")&&e.list_key.startsWith("user:")){const t=e.list_key.split(":")[1];this.tabChanged({tab:"tab_other_user",user_id:t})}this.sectionStack.push(this.currentSection),this.currentSection=e},shouldRenderSection(e){return!(e.hasOwnProperty("list_key")&&(e.list_key.startsWith("builtin:")||["ok_newest","newest"].includes(e.list_key))||e.hasOwnProperty("type")&&e.type==="space")},isSpace(e){return e.hasOwnProperty("type")&&e.type==="space"}},async mounted(){let e=await this.loadFeatured();this.featured=e,this.currentSection=this.featured,this.loaded=!0}},Cl={class:"section-header"},Ll={key:1,class:"section-title"},Il={key:0},Tl={key:1,class:"sections"},Al={class:"section-element-title"},Pl=["onClick"];function Ml(e,t,n,s,i,o){const r=M("ScrollList");return c(),h(H,null,[p("div",Cl,[i.loaded&&this.currentSection!==this.featured?(c(),h("button",{key:0,onClick:t[0]||(t[0]=(...a)=>this.handleBack&&this.handleBack(...a))},"back")):y("",!0),this.currentSection!==this.featured?(c(),h("h2",Ll,I(this.currentSection.hasOwnProperty("title_short")?this.currentSection.title_short:this.currentSection.title),1)):y("",!0)]),o.isList?(c(),h("div",Il,[J(r,{listType:this.currentSection.list_key,difficulty:"",tag:"",searchTerm:"",otherUserID:null,onTabChanged:t[1]||(t[1]=a=>this.tabChanged(a))},null,8,["listType"])])):o.isSection?(c(),h("div",Tl,[(c(!0),h(H,null,te(this.currentSection.sections,a=>(c(),h("div",Al,[o.shouldRenderSection(a)?(c(),h("div",{key:0,class:"section-button",onClick:u=>this.setSection(a)},I(a.title),9,Pl)):o.isSpace(a)?(c(),h("div",{key:1,style:Oe(`height: ${a.size/4}px`)},null,4)):y("",!0)]))),256))])):y("",!0)],64)}const Rl=E(Sl,[["render",Ml],["__scopeId","data-v-62efbe09"]]);const El={props:{currentTab:String,isLoading:Boolean,currentValue:String},methods:{applyFilter(e){if(this.isLoading)return;const t=document.querySelector(".active-difficulty-filter");if(t&&(t.classList.remove("active-difficulty-filter"),t.id==`filter-${e}`)){this.$emit("filter","");return}document.getElementById(`filter-${e}`).classList.add("active-difficulty-filter"),this.$emit("filter",e)}},mounted(){this.currentValue&&document.getElementById(`filter-${this.currentValue}`).classList.add("active-difficulty-filter")},emits:["filter"]},Bl={class:"difficulty-filter-container"};function xl(e,t,n,s,i,o){return c(),h("div",Bl,[p("div",{class:"filter",id:"filter-unrated",onClick:t[0]||(t[0]=r=>o.applyFilter("unrated"))},"unrated"),p("div",{class:"filter",id:"filter-easy",onClick:t[1]||(t[1]=r=>o.applyFilter("easy"))},"easy"),p("div",{class:"filter",id:"filter-medium",onClick:t[2]||(t[2]=r=>o.applyFilter("medium"))},"medium"),p("div",{class:"filter",id:"filter-hard",onClick:t[3]||(t[3]=r=>o.applyFilter("hard"))},"hard"),p("div",{class:"filter",id:"filter-veryhard",onClick:t[4]||(t[4]=r=>o.applyFilter("veryhard"))},"very hard"),p("div",{class:"filter",id:"filter-impossible",onClick:t[5]||(t[5]=r=>o.applyFilter("impossible"))},"impossible")])}const Dl=E(El,[["render",xl],["__scopeId","data-v-ba9f5812"]]);const $l={data(){return{tags:[],loaded:!1}},props:{currentTab:String,isLoading:Boolean,currentValue:String},methods:{applyFilter(e){if(this.isLoading)return;const t=document.querySelector(".active-tag-filter");if(t&&(t.classList.remove("active-tag-filter"),t.id==`filter-${e}`)){this.$emit("filter","");return}document.getElementById(`filter-${e}`).classList.add("active-tag-filter"),this.$emit("filter",e)},async loadFeatured(){const e=await Hs(this.$api_server_url);return e!==!1?e:[]}},async mounted(){let e=await this.loadFeatured();this.tags=e.tags,this.loaded=!0},emits:["filter"]},Ol={class:"tag-filter-container"},Ul=["id","onClick"];function Nl(e,t,n,s,i,o){return c(),h("div",Ol,[i.loaded?(c(!0),h(H,{key:0},te(i.tags,r=>(c(),h("div",{class:K("filter"+(r===n.currentValue?" active-tag-filter":"")),id:"filter-"+r,onClick:a=>o.applyFilter(r)},I(r),11,Ul))),256)):y("",!0)])}const jl=E($l,[["render",Nl],["__scopeId","data-v-eba2d131"]]);const Hl={},Pt=e=>(le("data-v-c8d71d40"),e=e(),ce(),e),ql={class:"terms-container"},Vl=Pt(()=>p("a",{href:"https://slindev.com/legalnotice",class:"terms-link"},"Legal Notice",-1)),Fl=Pt(()=>p("a",{href:"https://slindev.com/terms",class:"terms-link"},"EULA",-1)),Gl=Pt(()=>p("a",{href:"https://slindev.com/privacy",class:"terms-link"},"Privacy Policy",-1)),zl=[Vl,Fl,Gl];function Yl(e,t,n,s,i,o){return c(),h("div",ql,zl)}const qs=E(Hl,[["render",Yl],["__scopeId","data-v-c8d71d40"]]),Kl="/assets/rick_astley-cfa9dadc.webp";const Wl={components:{NavBar:Zi,LevelTitle:no,UserTitle:xr,ScrollList:js,LoginButton:kl,Featured:Rl,LevelDifficultySortingControls:Dl,LevelTagSortingControls:jl,Terms:qs},data(){return{tabActive:"tab_newest",searchTerm:"",userID:null,difficultyFilter:"",tagFilter:"",isLoading:!1}},computed:{...R(S,["isAdmin"]),...R(S,["isModerator"]),...R(S,["isSuperModerator"]),...R(S,["accessToken"]),showLevelTitle(){return["tab_newest","tab_ok_newest","tab_favorite_levels","tab_verify_queue","tab_reported_levels","tab_featured"].includes(this.tabActive)},showSortingControls(){return["tab_newest","tab_ok_newest"].includes(this.tabActive)},showUserTitle(){return["tab_my_levels","tab_other_user"].includes(this.tabActive)},tagString(){return["tab_verify_queue","tab_reported_levels","tab_featured"].includes(this.tabActive)?this.tabActive:this.tabActive==="tab_favorite_levels"?"favorite_levels":(this.tabActive=="tab_ok_newest"?"ok_":"")+(this.tagFilter==""?"":this.tagFilter+"_")+"newest"+(this.difficultyFilter==""?"":"_"+this.difficultyFilter)}},methods:{tabChanged(e){this.tabActive=e.tab,"search"in e&&(this.searchTerm=e.search),"user_id"in e?this.userID=e.user_id:this.userID=null,this.$router.push({query:e})},searchChanged(e){this.userID=null,this.searchTerm=e;let t={tab:this.tabActive};e&&e.length>0&&(t.search=e),this.$router.push({query:t})},async copyAccessToken(e){await navigator.clipboard.writeText(this.accessToken)},difficultyChanged(e){this.isLoading=!0,this.difficultyFilter=e},tagChanged(e){this.isLoading=!0,this.tagFilter=e},loaded(){this.isLoading=!1}},watch:{"$route.query":{handler(e){this.tabActive=e.tab||"tab_newest",this.searchTerm=e.search||"",this.userID=e.user_id||null}}},created(){document.title="GRAB Levels"}},Xl=e=>(le("data-v-e318a6a2"),e=e(),ce(),e),Zl={id:"level-browser"},Jl={key:0,class:"rick",src:Kl},Ql=Xl(()=>p("div",{class:"home-link-wrapper"},[p("a",{href:"/",class:"home-link"},[p("img",{alt:"GRAB logo",class:"logo",src:As})])],-1)),ec={key:0,class:"curation-button",type:"button",href:"/curation",target:"_blank"};function tc(e,t,n,s,i,o){const r=M("LoginButton"),a=M("NavBar"),u=M("LevelDifficultySortingControls"),f=M("LevelTagSortingControls"),d=M("LevelTitle"),_=M("UserTitle"),m=M("Featured"),g=M("ScrollList"),b=M("Terms");return c(),h("div",Zl,[o.showUserTitle&&i.userID=="29sgp24f1uorbc6vq8d2k"?(c(),h("img",Jl)):y("",!0),p("header",null,[Ql,J(r),e.isModerator?(c(),h("a",ec,"Curation")):y("",!0),e.isSuperModerator?(c(),h("button",{key:1,class:"access-token-button",type:"button",onClick:t[0]||(t[0]=(...B)=>o.copyAccessToken&&o.copyAccessToken(...B))},"Access Token")):y("",!0),J(a,{"tab-active":i.tabActive,onTabChanged:t[1]||(t[1]=B=>this.tabChanged(B)),onSearchChanged:t[2]||(t[2]=B=>this.searchChanged(B)),"search-term":i.searchTerm},null,8,["tab-active","search-term"]),o.showSortingControls?(c(),x(u,{key:2,currentTab:i.tabActive,isLoading:i.isLoading,currentValue:i.difficultyFilter,onFilter:o.difficultyChanged},null,8,["currentTab","isLoading","currentValue","onFilter"])):y("",!0),o.showSortingControls?(c(),x(f,{key:3,currentTab:i.tabActive,isLoading:i.isLoading,currentValue:i.tagFilter,onFilter:o.tagChanged},null,8,["currentTab","isLoading","currentValue","onFilter"])):y("",!0),o.showLevelTitle?(c(),x(d,{key:4,tagString:o.tagString},null,8,["tagString"])):y("",!0)]),p("main",null,[o.showUserTitle?(c(),x(_,{key:0,"other-user-i-d":i.userID},null,8,["other-user-i-d"])):y("",!0),i.tabActive==="tab_featured"?(c(),x(m,{key:1,onTabChanged:t[3]||(t[3]=B=>this.tabChanged(B))})):(c(),x(g,{key:2,"list-type":i.tabActive,difficulty:i.difficultyFilter,tag:i.tagFilter,"search-term":i.searchTerm,"other-user-i-d":i.userID,onTabChanged:t[4]||(t[4]=B=>this.tabChanged(B)),onLoaded:o.loaded},null,8,["list-type","difficulty","tag","search-term","other-user-i-d","onLoaded"]))]),J(b)])}const sc=E(Wl,[["render",tc],["__scopeId","data-v-e318a6a2"]]),os={type:"change"},yt={type:"start"},rs={type:"end"},it=new pn,as=new _n,nc=Math.cos(70*vn.DEG2RAD);class ic extends mn{constructor(t,n){super(),this.object=t,this.domElement=n,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new Z,this.cursor=new Z,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minTargetRadius=0,this.maxTargetRadius=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.zoomToCursor=!1,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:Be.ROTATE,MIDDLE:Be.DOLLY,RIGHT:Be.PAN},this.touches={ONE:xe.ROTATE,TWO:xe.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return a.phi},this.getAzimuthalAngle=function(){return a.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(l){l.addEventListener("keydown",ft),this._domElementKeyEvents=l},this.stopListenToKeyEvents=function(){this._domElementKeyEvents.removeEventListener("keydown",ft),this._domElementKeyEvents=null},this.saveState=function(){s.target0.copy(s.target),s.position0.copy(s.object.position),s.zoom0=s.object.zoom},this.reset=function(){s.target.copy(s.target0),s.object.position.copy(s.position0),s.object.zoom=s.zoom0,s.object.updateProjectionMatrix(),s.dispatchEvent(os),s.update(),o=i.NONE},this.update=function(){const l=new Z,k=new Nt().setFromUnitVectors(t.up,new Z(0,1,0)),O=k.clone().invert(),V=new Z,se=new Nt,Ie=new Z,ae=2*Math.PI;return function(sn=null){const Ot=s.object.position;l.copy(Ot).sub(s.target),l.applyQuaternion(k),a.setFromVector3(l),s.autoRotate&&o===i.NONE&&Q(we(sn)),s.enableDamping?(a.theta+=u.theta*s.dampingFactor,a.phi+=u.phi*s.dampingFactor):(a.theta+=u.theta,a.phi+=u.phi);let ye=s.minAzimuthAngle,ge=s.maxAzimuthAngle;isFinite(ye)&&isFinite(ge)&&(ye<-Math.PI?ye+=ae:ye>Math.PI&&(ye-=ae),ge<-Math.PI?ge+=ae:ge>Math.PI&&(ge-=ae),ye<=ge?a.theta=Math.max(ye,Math.min(ge,a.theta)):a.theta=a.theta>(ye+ge)/2?Math.max(ye,a.theta):Math.min(ge,a.theta)),a.phi=Math.max(s.minPolarAngle,Math.min(s.maxPolarAngle,a.phi)),a.makeSafe(),s.enableDamping===!0?s.target.addScaledVector(d,s.dampingFactor):s.target.add(d),s.target.sub(s.cursor),s.target.clampLength(s.minTargetRadius,s.maxTargetRadius),s.target.add(s.cursor),s.zoomToCursor&&F||s.object.isOrthographicCamera?a.radius=ve(a.radius):a.radius=ve(a.radius*f),l.setFromSpherical(a),l.applyQuaternion(O),Ot.copy(s.target).add(l),s.object.lookAt(s.target),s.enableDamping===!0?(u.theta*=1-s.dampingFactor,u.phi*=1-s.dampingFactor,d.multiplyScalar(1-s.dampingFactor)):(u.set(0,0,0),d.set(0,0,0));let tt=!1;if(s.zoomToCursor&&F){let Fe=null;if(s.object.isPerspectiveCamera){const Ge=l.length();Fe=ve(Ge*f);const st=Ge-Fe;s.object.position.addScaledVector(X,st),s.object.updateMatrixWorld()}else if(s.object.isOrthographicCamera){const Ge=new Z(z.x,z.y,0);Ge.unproject(s.object),s.object.zoom=Math.max(s.minZoom,Math.min(s.maxZoom,s.object.zoom/f)),s.object.updateProjectionMatrix(),tt=!0;const st=new Z(z.x,z.y,0);st.unproject(s.object),s.object.position.sub(st).add(Ge),s.object.updateMatrixWorld(),Fe=l.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),s.zoomToCursor=!1;Fe!==null&&(this.screenSpacePanning?s.target.set(0,0,-1).transformDirection(s.object.matrix).multiplyScalar(Fe).add(s.object.position):(it.origin.copy(s.object.position),it.direction.set(0,0,-1).transformDirection(s.object.matrix),Math.abs(s.object.up.dot(it.direction))<nc?t.lookAt(s.target):(as.setFromNormalAndCoplanarPoint(s.object.up,s.target),it.intersectPlane(as,s.target))))}else s.object.isOrthographicCamera&&(tt=f!==1,tt&&(s.object.zoom=Math.max(s.minZoom,Math.min(s.maxZoom,s.object.zoom/f)),s.object.updateProjectionMatrix()));return f=1,F=!1,tt||V.distanceToSquared(s.object.position)>r||8*(1-se.dot(s.object.quaternion))>r||Ie.distanceToSquared(s.target)>0?(s.dispatchEvent(os),V.copy(s.object.position),se.copy(s.object.quaternion),Ie.copy(s.target),!0):!1}}(),this.dispose=function(){s.domElement.removeEventListener("contextmenu",Dt),s.domElement.removeEventListener("pointerdown",Rt),s.domElement.removeEventListener("pointercancel",Ve),s.domElement.removeEventListener("wheel",Et),s.domElement.removeEventListener("pointermove",ht),s.domElement.removeEventListener("pointerup",Ve),s._domElementKeyEvents!==null&&(s._domElementKeyEvents.removeEventListener("keydown",ft),s._domElementKeyEvents=null)};const s=this,i={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let o=i.NONE;const r=1e-6,a=new jt,u=new jt;let f=1;const d=new Z,_=new de,m=new de,g=new de,b=new de,B=new de,C=new de,T=new de,A=new de,U=new de,X=new Z,z=new de;let F=!1;const q=[],ne={};let re=!1;function we(l){return l!==null?2*Math.PI/60*s.autoRotateSpeed*l:2*Math.PI/60/60*s.autoRotateSpeed}function ue(l){const k=Math.abs(l*.01);return Math.pow(.95,s.zoomSpeed*k)}function Q(l){u.theta-=l}function fe(l){u.phi-=l}const ke=function(){const l=new Z;return function(O,V){l.setFromMatrixColumn(V,0),l.multiplyScalar(-O),d.add(l)}}(),Se=function(){const l=new Z;return function(O,V){s.screenSpacePanning===!0?l.setFromMatrixColumn(V,1):(l.setFromMatrixColumn(V,0),l.crossVectors(s.object.up,l)),l.multiplyScalar(O),d.add(l)}}(),oe=function(){const l=new Z;return function(O,V){const se=s.domElement;if(s.object.isPerspectiveCamera){const Ie=s.object.position;l.copy(Ie).sub(s.target);let ae=l.length();ae*=Math.tan(s.object.fov/2*Math.PI/180),ke(2*O*ae/se.clientHeight,s.object.matrix),Se(2*V*ae/se.clientHeight,s.object.matrix)}else s.object.isOrthographicCamera?(ke(O*(s.object.right-s.object.left)/s.object.zoom/se.clientWidth,s.object.matrix),Se(V*(s.object.top-s.object.bottom)/s.object.zoom/se.clientHeight,s.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),s.enablePan=!1)}}();function _e(l){s.object.isPerspectiveCamera||s.object.isOrthographicCamera?f/=l:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),s.enableZoom=!1)}function Me(l){s.object.isPerspectiveCamera||s.object.isOrthographicCamera?f*=l:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),s.enableZoom=!1)}function me(l,k){if(!s.zoomToCursor)return;F=!0;const O=s.domElement.getBoundingClientRect(),V=l-O.left,se=k-O.top,Ie=O.width,ae=O.height;z.x=V/Ie*2-1,z.y=-(se/ae)*2+1,X.set(z.x,z.y,1).unproject(s.object).sub(s.object.position).normalize()}function ve(l){return Math.max(s.minDistance,Math.min(s.maxDistance,l))}function Ce(l){_.set(l.clientX,l.clientY)}function qe(l){me(l.clientX,l.clientX),T.set(l.clientX,l.clientY)}function Re(l){b.set(l.clientX,l.clientY)}function et(l){m.set(l.clientX,l.clientY),g.subVectors(m,_).multiplyScalar(s.rotateSpeed);const k=s.domElement;Q(2*Math.PI*g.x/k.clientHeight),fe(2*Math.PI*g.y/k.clientHeight),_.copy(m),s.update()}function v(l){A.set(l.clientX,l.clientY),U.subVectors(A,T),U.y>0?_e(ue(U.y)):U.y<0&&Me(ue(U.y)),T.copy(A),s.update()}function L(l){B.set(l.clientX,l.clientY),C.subVectors(B,b).multiplyScalar(s.panSpeed),oe(C.x,C.y),b.copy(B),s.update()}function w(l){me(l.clientX,l.clientY),l.deltaY<0?Me(ue(l.deltaY)):l.deltaY>0&&_e(ue(l.deltaY)),s.update()}function P(l){let k=!1;switch(l.code){case s.keys.UP:l.ctrlKey||l.metaKey||l.shiftKey?fe(2*Math.PI*s.rotateSpeed/s.domElement.clientHeight):oe(0,s.keyPanSpeed),k=!0;break;case s.keys.BOTTOM:l.ctrlKey||l.metaKey||l.shiftKey?fe(-2*Math.PI*s.rotateSpeed/s.domElement.clientHeight):oe(0,-s.keyPanSpeed),k=!0;break;case s.keys.LEFT:l.ctrlKey||l.metaKey||l.shiftKey?Q(2*Math.PI*s.rotateSpeed/s.domElement.clientHeight):oe(s.keyPanSpeed,0),k=!0;break;case s.keys.RIGHT:l.ctrlKey||l.metaKey||l.shiftKey?Q(-2*Math.PI*s.rotateSpeed/s.domElement.clientHeight):oe(-s.keyPanSpeed,0),k=!0;break}k&&(l.preventDefault(),s.update())}function N(l){if(q.length===1)_.set(l.pageX,l.pageY);else{const k=Ee(l),O=.5*(l.pageX+k.x),V=.5*(l.pageY+k.y);_.set(O,V)}}function G(l){if(q.length===1)b.set(l.pageX,l.pageY);else{const k=Ee(l),O=.5*(l.pageX+k.x),V=.5*(l.pageY+k.y);b.set(O,V)}}function $(l){const k=Ee(l),O=l.pageX-k.x,V=l.pageY-k.y,se=Math.sqrt(O*O+V*V);T.set(0,se)}function D(l){s.enableZoom&&$(l),s.enablePan&&G(l)}function Y(l){s.enableZoom&&$(l),s.enableRotate&&N(l)}function Le(l){if(q.length==1)m.set(l.pageX,l.pageY);else{const O=Ee(l),V=.5*(l.pageX+O.x),se=.5*(l.pageY+O.y);m.set(V,se)}g.subVectors(m,_).multiplyScalar(s.rotateSpeed);const k=s.domElement;Q(2*Math.PI*g.x/k.clientHeight),fe(2*Math.PI*g.y/k.clientHeight),_.copy(m)}function ee(l){if(q.length===1)B.set(l.pageX,l.pageY);else{const k=Ee(l),O=.5*(l.pageX+k.x),V=.5*(l.pageY+k.y);B.set(O,V)}C.subVectors(B,b).multiplyScalar(s.panSpeed),oe(C.x,C.y),b.copy(B)}function Mt(l){const k=Ee(l),O=l.pageX-k.x,V=l.pageY-k.y,se=Math.sqrt(O*O+V*V);A.set(0,se),U.set(0,Math.pow(A.y/T.y,s.zoomSpeed)),_e(U.y),T.copy(A);const Ie=(l.pageX+k.x)*.5,ae=(l.pageY+k.y)*.5;me(Ie,ae)}function Ys(l){s.enableZoom&&Mt(l),s.enablePan&&ee(l)}function Ks(l){s.enableZoom&&Mt(l),s.enableRotate&&Le(l)}function Rt(l){s.enabled!==!1&&(q.length===0&&(s.domElement.setPointerCapture(l.pointerId),s.domElement.addEventListener("pointermove",ht),s.domElement.addEventListener("pointerup",Ve)),en(l),l.pointerType==="touch"?xt(l):Ws(l))}function ht(l){s.enabled!==!1&&(l.pointerType==="touch"?Qs(l):Xs(l))}function Ve(l){switch(tn(l),q.length){case 0:s.domElement.releasePointerCapture(l.pointerId),s.domElement.removeEventListener("pointermove",ht),s.domElement.removeEventListener("pointerup",Ve),s.dispatchEvent(rs),o=i.NONE;break;case 1:const k=q[0],O=ne[k];xt({pointerId:k,pageX:O.x,pageY:O.y});break}}function Ws(l){let k;switch(l.button){case 0:k=s.mouseButtons.LEFT;break;case 1:k=s.mouseButtons.MIDDLE;break;case 2:k=s.mouseButtons.RIGHT;break;default:k=-1}switch(k){case Be.DOLLY:if(s.enableZoom===!1)return;qe(l),o=i.DOLLY;break;case Be.ROTATE:if(l.ctrlKey||l.metaKey||l.shiftKey){if(s.enablePan===!1)return;Re(l),o=i.PAN}else{if(s.enableRotate===!1)return;Ce(l),o=i.ROTATE}break;case Be.PAN:if(l.ctrlKey||l.metaKey||l.shiftKey){if(s.enableRotate===!1)return;Ce(l),o=i.ROTATE}else{if(s.enablePan===!1)return;Re(l),o=i.PAN}break;default:o=i.NONE}o!==i.NONE&&s.dispatchEvent(yt)}function Xs(l){switch(o){case i.ROTATE:if(s.enableRotate===!1)return;et(l);break;case i.DOLLY:if(s.enableZoom===!1)return;v(l);break;case i.PAN:if(s.enablePan===!1)return;L(l);break}}function Et(l){s.enabled===!1||s.enableZoom===!1||o!==i.NONE||(l.preventDefault(),s.dispatchEvent(yt),w(Zs(l)),s.dispatchEvent(rs))}function Zs(l){const k=l.deltaMode,O={clientX:l.clientX,clientY:l.clientY,deltaY:l.deltaY};switch(k){case 1:O.deltaY*=16;break;case 2:O.deltaY*=100;break}return l.ctrlKey&&!re&&(O.deltaY*=10),O}function Js(l){l.key==="Control"&&(re=!0,s.domElement.getRootNode().addEventListener("keyup",Bt,{passive:!0,capture:!0}))}function Bt(l){l.key==="Control"&&(re=!1,s.domElement.getRootNode().removeEventListener("keyup",Bt,{passive:!0,capture:!0}))}function ft(l){s.enabled===!1||s.enablePan===!1||P(l)}function xt(l){switch($t(l),q.length){case 1:switch(s.touches.ONE){case xe.ROTATE:if(s.enableRotate===!1)return;N(l),o=i.TOUCH_ROTATE;break;case xe.PAN:if(s.enablePan===!1)return;G(l),o=i.TOUCH_PAN;break;default:o=i.NONE}break;case 2:switch(s.touches.TWO){case xe.DOLLY_PAN:if(s.enableZoom===!1&&s.enablePan===!1)return;D(l),o=i.TOUCH_DOLLY_PAN;break;case xe.DOLLY_ROTATE:if(s.enableZoom===!1&&s.enableRotate===!1)return;Y(l),o=i.TOUCH_DOLLY_ROTATE;break;default:o=i.NONE}break;default:o=i.NONE}o!==i.NONE&&s.dispatchEvent(yt)}function Qs(l){switch($t(l),o){case i.TOUCH_ROTATE:if(s.enableRotate===!1)return;Le(l),s.update();break;case i.TOUCH_PAN:if(s.enablePan===!1)return;ee(l),s.update();break;case i.TOUCH_DOLLY_PAN:if(s.enableZoom===!1&&s.enablePan===!1)return;Ys(l),s.update();break;case i.TOUCH_DOLLY_ROTATE:if(s.enableZoom===!1&&s.enableRotate===!1)return;Ks(l),s.update();break;default:o=i.NONE}}function Dt(l){s.enabled!==!1&&l.preventDefault()}function en(l){q.push(l.pointerId)}function tn(l){delete ne[l.pointerId];for(let k=0;k<q.length;k++)if(q[k]==l.pointerId){q.splice(k,1);return}}function $t(l){let k=ne[l.pointerId];k===void 0&&(k=new de,ne[l.pointerId]=k),k.set(l.pageX,l.pageY)}function Ee(l){const k=l.pointerId===q[0]?q[1]:q[0];return ne[k]}s.domElement.addEventListener("contextmenu",Dt),s.domElement.addEventListener("pointerdown",Rt),s.domElement.addEventListener("pointercancel",Ve),s.domElement.addEventListener("wheel",Et,{passive:!1}),s.domElement.getRootNode().addEventListener("keydown",Js,{passive:!0,capture:!0}),this.update()}}async function oc(e){const t=await fetch(e+"get_shop_items?version=3"),n=await t.text();return t.status!=200?!1:JSON.parse(n)}class W{static halfColor(t){return t.multiplyScalar(.5)}static getColorFromInput(t){return t instanceof ot?t:new ot(...Array.isArray(t)?t:[t])}static applyColors(t,n,s){const i=W.getColorFromInput(t.userData.primary_color),o=W.getColorFromInput(t.userData.secondary_color),r={default_color:a=>new ot(...n.materials[a].diffuseColor),default_primary_color:()=>i,default_secondary_color:()=>o,default_secondary_color_visor:()=>W.halfColor(o.clone()),default_secondary_color_darkened:()=>W.halfColor(o.clone()),default_primary_color_darkened:()=>W.halfColor(i.clone()),default_primary_color_visor:()=>W.halfColor(i.clone())};return s.traverse(a=>{a.material&&r[a.name]&&a.material.color.set(r[a.name](s.children.indexOf(a)))}),s}static applyColorsToAll(t){const n=W.getColorFromInput(t.userData.primary_color),s=W.getColorFromInput(t.userData.secondary_color),i={default_primary_color:()=>n,default_secondary_color:()=>s,default_secondary_color_visor:()=>W.halfColor(s.clone()),default_secondary_color_darkened:()=>W.halfColor(s.clone()),default_primary_color_darkened:()=>W.halfColor(n.clone()),default_primary_color_visor:()=>W.halfColor(n.clone())};t.traverse(o=>{o.material&&i[o.name]&&o.material.color.set(i[o.name]())})}static applyMaterialIndices(t,n){return t.children.forEach((s,i)=>{var o,r,a;s.name=((r=(o=n==null?void 0:n.materials)==null?void 0:o[i])==null?void 0:r.type)||((a=n==null?void 0:n.materials)==null?void 0:a[i])||"default"}),t}static adjustGroupForCategory(t,n){if(n.includes("body"))t.position.copy(new Z(0,-.2,0));else if(n==="hand"){const s=new hs,i=t.clone(),o=t;return i.position.set(.3,-.5,-.4),i.rotation.set(10*Math.PI/180,0,170*Math.PI/180),o.position.set(-.3,-.75,-.1),o.rotation.set(-45*Math.PI/180,0,-190*Math.PI/180),o.scale.set(-1,1,1),s.add(i,o),s}else n==="checkpoint"?t.position.set(-.5,-1.5,0):n=="rope/left"||n==="grapple/hook/left"?(t.position.set(.3,-.5,-.4),t.rotation.z=170*(Math.PI/180),t.rotation.x=10*(Math.PI/180),t.rotation.y=0):(n=="rope/right"||n==="grapple/hook/right")&&(t.position.set(-.3,-.75,-.1),t.rotation.x=-45*(Math.PI/180),t.rotation.y=0,t.rotation.z=-190*(Math.PI/180),t.scale.set(-1,1,1));if(n.includes("grapple/hook")){let s=new Z(0,0,-1);s.applyQuaternion(t.quaternion),t.position.add(s)}return t}}class Vs extends yn{constructor(t){super(t)}load(t,n,s,i,o){const r=new gn(this.manager);r.setPath(this.path),r.setResponseType("arraybuffer"),r.setRequestHeader(this.requestHeader),r.setWithCredentials(this.withCredentials),r.load(t+n+".sgm",a=>{try{const u=this.parse(a),f=this.createGroupFromMeshes(u[0],u[1],n,o);s(f)}catch(u){i?i(u):console.error(u),this.manager.itemError(t+n)}})}parse(t){const n=new DataView(t);let s=0;function i(){let C=n.getUint8(s,!0);return s+=1,C}function o(){let C=n.getUint16(s,!0);return s+=2,C}function r(){let C=n.getUint32(s,!0);return s+=4,C}function a(){let C=n.getFloat32(s,!0);return s+=4,C}function u(C){const T=new Array(C);for(let A=0;A<C;A++)T[A]=a();return T}function f(C){const T=new Uint8Array(C);for(let A=0;A<C;A++)T[A]=i();return T}function d(){var C="",T=-1;const A=o()-1;for(let U=0;U<A;U++)T=i(),C+=String.fromCharCode(T);return f(1),C}r(),i();const _=i(),m=[];for(let C=0;C<_;C++){const T=i(),A=i(),U=[];for(let F=0;F<A;F++){const q=i(),ne=[];for(let re=0;re<q;re++){const we=i(),ue=d().replace("*","png");ne.push([ue,we])}U.push(ne)}const X=i(),z=[];for(let F=0;F<X;F++){const q=i(),ne=u(4);z.push([ne,q])}m.push({material_id:T,uv_data:U,colors:z})}const g=i(),b=[];let B=0;for(let C=0;C<g;C++){const T=[],A=[],U=i(),X=i(),z=r(),F=i(),q=i(),ne=i(),re=i();for(let Q=0;Q<z;Q++){const fe=u(3),ke=u(3),Se=[];for(let ve=0;ve<F;ve++){const Ce=u(2);Se.push(Ce)}const oe=q===4?u(4):[],_e=ne?u(4):[],Me=re?u(4):[],me=re?u(4):[];T.push([fe,ke,Se,oe,_e,Me,me])}const we=r(),ue=i();for(let Q=0;Q<we;Q++){const fe=ue===4?r():o();A.push(fe)}B+=T.length,b.push({mesh_id:U,material_id:X,vertices:T,indices:A})}return[b,m]}createGroupFromMeshes(t,n){let s=new hs;const i=n.map(o=>{let r=o.colors&&o.colors.length>0?o.colors[0][0]:[1,1,1];const a={color:new ot(r[0],r[1],r[2])};return new bn(a)});return t.forEach(o=>{const r=new wn,a=[],u=[],f=[],d=[];o.vertices.forEach(m=>{a.push(...m[0]),u.push(...m[1]),m[2].length>0&&f.push(...m[2][0]),m[3].length>0&&d.push(...m[3])}),r.setAttribute("position",new nt(a,3)),r.setAttribute("normal",new nt(u,3)),r.setAttribute("uv",new nt(f,2)),r.setAttribute("color",new nt(d,4)),r.setIndex(new kn(o.indices,1)),d.length>0&&(i[o.material_id].vertexColors=!0);const _=new Sn(r,i[o.material_id]);s.add(_)}),s}}class rc{constructor(t,n,s){this.baseUrl=t,this.scene=n,this.activeModels={},this.itemsList=s,this.pendingAttachments={},this.defaults={head:{file:"player/head",materials:[{type:"default_primary_color"},{type:"default_secondary_color"},{type:"default_secondary_color_visor"}]},body:{file:"player/body",materials:[{type:"default_secondary_color"},{type:"default_primary_color"}]},hand:{file:"player/hand_claw",materials:[{type:"default_primary_color"},{type:"default_secondary_color"}]},"rope/left":{file:"player/grapple_rope"},"rope/right":{file:"player/grapple_rope"},checkpoint:{file:"player/checkpoint"},"grapple/hook/left":{file:"player/grapple_anchor"},"grapple/hook/right":{file:"player/grapple_anchor"}},this.loadDefaults()}loadDefaults(){for(let t in this.defaults)this.loadModel(this.defaults[t].file,t)}unequip(t){this.defaults[t]?this.loadModel(this.defaults[t].file,t):this.HandleModelToScene(void 0,t)}HandleModelToScene(t=void 0,n){this.activeModels[n]&&(this.resetAttachments(n),this.scene.remove(this.activeModels[n])),this.activeModels[n]=t,t&&this.scene.add(t)}loadModel(t,n){const s=new Vs,i=this.itemsList[t]||this.defaults[n],o=i.file||t;s.load(this.baseUrl,o,r=>{r=W.applyMaterialIndices(r,i),r=W.applyColors(this.scene,i,r),r=W.adjustGroupForCategory(r,n),r.name=t,r=this.setupAttachments(r,i.attachment_point?n+"/"+i.attachment_point:n),this.HandleModelToScene(r,n),this.applyPendingAttachments(r,n),this.adjustAsChildModel(n)})}applyPendingAttachments(t,n){this.pendingAttachments[n]&&(this.adjustAttachments(t,this.itemsList[t.name]),delete this.pendingAttachments[n])}adjustAsChildModel(t){for(let n in this.activeModels){const s=this.activeModels[n],i=this.itemsList[s.name];if(i&&i.attachment_points&&i.attachment_points[t.split("/").pop()]){this.adjustAttachments(s,i);break}}}resetAttachments(t){for(let n in this.activeModels)n.startsWith(t+"/")&&this.activeModels[n].restore()}adjustAttachments(t,n){if(n.attachment_points)for(let[s,i]of Object.entries(n.attachment_points)){const o=`${n.type}/${s}`,r=this.activeModels[o];r?this.applyAttachment(r,t,i):this.pendingAttachments[o]={parentModel:t,point:i,attachmentType:s}}n.attachment_offset_v2&&(t.position.z-=n.attachment_offset_v2)}applyAttachment(t,n,s){var o;t.restore();const i=(o=this.itemsList[t.name].attachment_point_overrides)==null?void 0:o[n.name];i?(i.position&&t.position.copy(new Z(...i.position)),i.scale&&t.scale.set(i.scale,i.scale,i.scale)):(s.position&&t.position.copy(new Z(...s.position)),s.rotation&&t.rotation.copy(new gt(...s.rotation)),s.scale&&t.scale.set(s.scale,s.scale,s.scale))}setupAttachments(t,n){let{position:s,rotation:i}=this.handleAttachments(n),o,r;return i&&(i=new gt(i.x*Math.PI/180,i.y*Math.PI/180,i.z*Math.PI/180),t.rotation.copy(i)),r=t.rotation.clone(),s&&(s=new Z(...s),t.position.add(s)),o=t.position.clone(),t.restore=()=>(o&&t.position.copy(o),r&&t.rotation.copy(r),t.scale.set(1,1,1),t),t}handleAttachments(t){const n={"head/hat":[0,.190766,0],"head/glasses":[0,.008302,-.203441],"head/glasses/mouth":[0,-.192385,-.291841],"body/backpack":[0,-.311955,.278574],"body/neck/chest":[0,-.300416,-.124705],"body/badge/left":[-.134673,-.267122,-.088314],"body/badge/right":[.134673,-.267122,-.088314]},s={"body/badge/left":[15.4997,-1.23764,0],"body/badge/right":[-15.4997,-1.23764,0]};return{position:n[t]||null,rotation:s[t]||null}}}const ac={data(){return{fileExists:!1}},props:{itemName:{type:String,required:!0},itemObject:{type:Object,required:!0},player:Object,primaryColor:Array,secondaryColor:Array,filterChoice:String},computed:{hasDualEquip(){return["grapple/hook","body/badge"].includes(this.itemObject.type)},filterType(){return{All:"All",Heads:"head",Hats:"head/hat",Facewear:"head/glasses",Body:"body",Backpack:"body/backpack",Neck:"body/neck",Badge:"body/badge",Hands:"hand",Checkpoint:"checkpoint",Grapples:"grapple/hook"}[this.filterChoice]}},mounted(){!this.itemObject.type.includes("currency")&&!this.itemName.includes("rotation")&&this.setupThreeScene()},methods:{isEquipped(e=null){const t=this.player.activeModels;return e?Object.keys(t).some(n=>{const s=this.player.activeModels[n];if(s.name===this.itemName)return!!n.includes(e);s&&s.name===this.itemName&&n.includes(e)}):Object.values(t).some(n=>n?n.name===this.itemName:!1)},equip(e=void 0){const t=e?`${this.itemObject.type}/${e}`:this.itemObject.type;this.player.loadModel(this.itemName,t)},unequip(e){const t=Object.keys(this.player.activeModels).find(n=>{const s=this.player.activeModels[n];return s?s.name===this.itemName&&(e?s.type.includes(e):!0):!1});this.player.unequip(t)},setupThreeScene(){const e=new fs,t=new ps(55,1,1,1e3);return t.position.z+=2,e.userData.element=this.$refs.scene,e.userData.camera=t,e.userData.primary_color=this.primaryColor,e.userData.secondary_color=this.secondaryColor,(async n=>{new Vs().load("/",this.itemObject.file,i=>{i=W.applyMaterialIndices(i,this.itemObject),i=W.applyColors(n,this.itemObject,i),i=this.applyPreviewRotation(i),n.add(new _s(16777215,.5)),n.add(i),this.fileExists=!0},()=>{this.fileExists=!1})})(e),this.$emit("updateSceneList",e)},applyPreviewRotation(e){if(this.itemObject.preview_rotation!==void 0){const[t,n,s]=this.itemObject.preview_rotation.map(Number);let i=new gt(n*(Math.PI/180),t*(Math.PI/180),s*(Math.PI/180));e.rotation.copy(i)}return e}}},lc={class:"cosmetic-card"},cc={class:"scene",ref:"scene"},uc={key:0,class:"btns-container"},dc={key:1,class:"btns-container"};function hc(e,t,n,s,i,o){return pe((c(),h("div",lc,[p("h3",null,I(n.itemObject.title),1),p("div",cc,null,512),o.hasDualEquip?(c(),h("div",uc,[o.isEquipped("left")?(c(),h("button",{key:0,onClick:t[0]||(t[0]=r=>o.unequip("left")),class:"btn-unequip"},"Un-equip Left")):(c(),h("button",{key:1,onClick:t[1]||(t[1]=r=>o.equip("left")),class:"btn-preview"},"Preview Left")),o.isEquipped("right")?(c(),h("button",{key:2,onClick:t[2]||(t[2]=r=>o.unequip("right")),class:"btn-unequip"},"Un-equip Right")):(c(),h("button",{key:3,onClick:t[3]||(t[3]=r=>o.equip("right")),class:"btn-preview"},"Preview Right"))])):(c(),h("div",dc,[o.isEquipped()?(c(),h("button",{key:0,onClick:t[4]||(t[4]=r=>o.unequip()),class:"btn-unequip"},"Un-equip")):(c(),h("button",{key:1,onClick:t[5]||(t[5]=r=>o.equip()),class:"btn-preview"},"Preview"))]))],512)),[[Ue,i.fileExists&&(n.itemObject.type===o.filterType||o.filterType==="All"&&!n.itemObject.type.includes("currency"))&&(o.isEquipped||!n.itemName.includes("rotation"))]])}const fc=E(ac,[["render",hc],["__scopeId","data-v-45754fa9"]]);const pc={data(){return{NavBar:[{id:"items",text:"Cosmetics",onClick:this.handleNavBarInput},{id:"primary",text:"Main Color",onClick:this.handleNavBarInput},{id:"secondary",text:"Second Color",onClick:this.handleNavBarInput}],active:"items"}},components:{DropDown:Ns},props:{isItemsSelected:{type:Boolean,require:!0}},methods:{handleNavBarInput(e){this.active=e.target.id,this.$emit("UpdateNav",e.target.id)}}},_c={class:"navbar"},mc=["id","onClick"];function vc(e,t,n,s,i,o){const r=M("DropDown");return c(),h("nav",_c,[(c(!0),h(H,null,te(i.NavBar,a=>(c(),h("button",{key:a.id,id:a.id,onClick:a.onClick,class:K(i.active==a.id?"active":"")},I(a.text),11,mc))),128)),pe(J(r,{options:["All","Heads","Hats","Facewear","Body","Backpack","Badge","Neck","Hands","Checkpoint","Grapples"],defaultChoice:"All",onChangeSelection:t[0]||(t[0]=a=>e.$emit("changeSelection",a))},null,512),[[Ue,n.isItemsSelected]])])}const yc=E(pc,[["render",vc]]);const gc={props:{page:{type:String,required:!0},pageColorIndices:{type:Object,required:!1}},data(){return{colors:[],selectedIndex:null}},created(){this.generateColors()},methods:{generateColors(){this.colors=Array.from({length:100},(e,t)=>{const n=Math.floor(t/10),s=t%10,i=this.GetColor(n,s);return this.LinearToGamma([i.r,i.g,i.b])})},getColorStyle(e,t){const n={backgroundColor:e};return t===this.selectedIndex&&(n.outline="3px solid #333"),n},selectColor(e){this.selectedIndex=e,this.$emit("color-selected",{page:this.page,index:this.selectedIndex,color:this.colors[e]})},GetColor(e,t){return e==0?this.ConvertHSVToRGB(0,0,1-t/10):e<=5&&e!=0?this.ConvertHSVToRGB(2*Math.PI*t/10,1,e/(10-4)):this.ConvertHSVToRGB(2*Math.PI*t/10,1-(e-5)/(10-5),1)},ConvertHSVToRGB(e,t,n,s=1){let i=e*3/Math.PI;const o=i-Math.floor(i);i>=3&&(i-=6),i<-3&&(i+=6);let r=Math.max(n,0),a=Math.max(n-t*n,0),u=Math.max(n-t*o*n,0),f=Math.max(n-t*(1-o)*n,0);return i<-2?{r,g:f,b:a,a:s}:i<-1?{r:u,g:r,b:a,a:s}:i<0?{r:a,g:r,b:f,a:s}:i<1?{r:a,g:u,b:r,a:s}:i<2?{r:f,g:a,b:r,a:s}:{r,g:a,b:u,a:s}},LinearToGamma([e,t,n]){return e=e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055,t=t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055,n=n<=.0031308?12.92*n:1.055*Math.pow(n,1/2.4)-.055,`rgb(${Math.floor(e*255)}, ${Math.floor(t*255)}, ${Math.floor(n*255)})`}},watch:{page(){this.selectedIndex=null,this.pageColorIndices&&this.pageColorIndices[this.page]!==void 0&&(this.selectedIndex=this.pageColorIndices[this.page])}}},bc={class:"color-grid"},wc=["onClick"];function kc(e,t,n,s,i,o){return c(),h("div",bc,[(c(!0),h(H,null,te(i.colors,(r,a)=>(c(),h("div",{key:a,class:"color-box",style:Oe(o.getColorStyle(r,a)),onClick:u=>o.selectColor(a)},null,12,wc))),128))])}const Sc=E(gc,[["render",kc],["__scopeId","data-v-17c2e398"]]);const Cc={data(){return{navDirectory:void 0,selectedPrimaryColor:null,selectedSecondaryColor:null,filterChoice:"All",pageColorIndices:{}}},created(){this.scenes=[],this.divRenderer=null},async mounted(){this.setupUI(),this.navDirectory="items";const e=await this.initScene();this.divRenderer=e},components:{CosmeticCard:fc,NavBar:yc,ColorPallete:Sc},props:{playerInfo:{type:Object,required:!0},player:{type:Object,required:!1},itemsList:{type:Object,required:!0}},computed:{isItemsSelected(){return this.navDirectory==="items"},isColorTypeSelected(){return this.navDirectory==="primary"||this.navDirectory==="secondary"}},methods:{async initScene(){const e=new ms({canvas:this.canvas,alpha:!0,transparent:!0,antialias:!0});return e.setPixelRatio(window.devicePixelRatio),e.setAnimationLoop(this.divRenderLoop),e},setupUI(){if(this.canvas=document.getElementById("canvas"),!this.canvas){console.error("Canvas element not found");return}let t=document.getElementById("player-viewer").getBoundingClientRect(),n=t.height,s=t.width;this.canvas.style.height=n,this.canvas.style.width=s},updateSize(){let e=this.canvas.clientWidth,t=this.canvas.clientHeight;(this.canvas.width!==e||this.canvas.height!=t)&&this.divRenderer.setSize(e,t,!1)},divRenderLoop(){this.updateSize(),this.canvas.style.transform=`translateY(${window.scrollY}px), translateX(${window.scrollX})`,this.divRenderer.clear(),this.divRenderer.setScissorTest(!0),this.scenes.forEach(e=>{let n=e.userData.element.getBoundingClientRect(),i=document.getElementById("categories-content").getBoundingClientRect();if(n.bottom>i.bottom||n.top<i.top||n.right<0||n.left>this.divRenderer.domElement.clientWidth)return;let o=e.userData.camera,r=n.right-n.left,a=n.bottom-n.top,u=n.left,f=this.divRenderer.domElement.clientHeight-n.bottom;this.divRenderer.setViewport(u,f,r,a),this.divRenderer.setScissor(u,f,r,a),this.divRenderer.render(e,o)}),this.divRenderer.setScissorTest(!1)},handleColorSelected(e,t,n){this.pageColorIndices[e]=t,this.$emit("changeColor",{page:e,color:n})}}},Lc=e=>(le("data-v-24a19a50"),e=e(),ce(),e),Ic={id:"customizations"},Tc={id:"categories-content"},Ac={class:"card-list",id:"card-list"},Pc=Lc(()=>p("div",{id:"content"},null,-1));function Mc(e,t,n,s,i,o){const r=M("NavBar"),a=M("CosmeticCard"),u=M("ColorPallete");return c(),h("div",Ic,[p("div",Tc,[J(r,{onUpdateNav:t[0]||(t[0]=f=>i.navDirectory=f),onChangeSelection:t[1]||(t[1]=f=>i.filterChoice=f),isItemsSelected:o.isItemsSelected},null,8,["isItemsSelected"]),pe(p("div",Ac,[n.player?(c(!0),h(H,{key:0},te(n.itemsList,(f,d)=>(c(),x(a,{itemName:d,itemObject:f,player:n.player,filterChoice:i.filterChoice,onUpdateSceneList:t[2]||(t[2]=_=>e.scenes.push(_)),secondaryColor:n.playerInfo.active_customizations.player_color_secondary.color,primaryColor:n.playerInfo.active_customizations.player_color_primary.color},null,8,["itemName","itemObject","player","filterChoice","secondaryColor","primaryColor"]))),256)):y("",!0)],512),[[Ue,o.isItemsSelected]]),o.isColorTypeSelected?(c(),x(u,{key:0,pageColorIndices:i.pageColorIndices,page:i.navDirectory,onColorSelected:t[3]||(t[3]=f=>o.handleColorSelected(f.page,f.index,f.color))},null,8,["pageColorIndices","page"])):y("",!0)]),Pc])}const Rc=E(Cc,[["render",Mc],["__scopeId","data-v-24a19a50"]]);const Ec={data(){return{itemsList:void 0,ToolsButtons:[{id:"back",text:"Back",onClick:()=>{window.location.href=this.ToolsButtons[0].href}},{id:"export-png",text:"↓ .png",onClick:this.exportPNG},{id:"export-gltf",text:"↓ .gltf",onClick:this.exportGLTF}],playerInfo:void 0,playerItems:void 0,player:void 0,canvas:null}},components:{PlayerToolsContent:Rc},computed:{...R(S,["accessToken","isLoggedIn"])},created(){this.scene=null,this.camera=null,this.renderer=null;const e=new URLSearchParams(window.location.search).get("user_id");this.ToolsButtons[0].href=`https://grabvr.quest/levels?tab=tab_other_user&user_id=${e}`},async mounted(){const e=await oc(this.$api_server_url);if(this.itemsList=e,this.$route.query.user_id){const i=await $s(this.$api_server_url);this.playerInfo=i,this.playerItems=i.active_customizations.items}const{scene:t,camera:n,renderer:s}=await this.initScene();this.scene=t,this.camera=n,this.renderer=s,this.render(),this.initPlayer()},methods:{async initScene(){In.enabled=!0;const e=new ms({canvas:document.getElementById("player-renderer"),alpha:!0,transparent:!0,antialias:!0,preserveDrawingBuffer:!0});e.setPixelRatio(window.devicePixelRatio),e.setSize(400,450);const t=new fs,n=new Cn(16777215,2.5);n.position.set(0,1,-2);const s=new _s(16777215,1);t.add(s,n);const i=new ps(55,400/450,1,1e3);i.position.set(0,0,-3.5);const o=new ic(i,e.domElement);return o.enablePan=!1,o.maxPolarAngle=Math.PI,o.addEventListener("start",()=>document.body.style.cursor="none"),o.addEventListener("end",()=>document.body.style.cursor="auto"),{scene:t,camera:i,renderer:e}},render(){this.renderer.render(this.scene,this.camera),requestAnimationFrame(this.render)},initPlayer(){this.scene.userData.primary_color=this.playerInfo.active_customizations.player_color_primary.color,this.scene.userData.secondary_color=this.playerInfo.active_customizations.player_color_secondary.color,this.player=new rc("/",this.scene,this.itemsList);for(let e in this.playerItems)this.player.loadModel(this.playerItems[e],e)},exportPNG(){const e=document.getElementById("player-renderer"),t=document.createElement("a");t.download=`${this.playerInfo.user_name}.png`,t.href=e.toDataURL(),t.click()},exportGLTF(){new Ln().parse(this.scene,t=>{const n=new Blob([JSON.stringify(t)],{type:"text/json"}),s=document.createElement("a");s.href=URL.createObjectURL(n),s.download=`${this.playerInfo.user_name}.gltf`,s.click()},t=>console.error("An error happened",t))},changeColor(e){e.page==="primary"&&(this.scene.userData.primary_color=e.color),e.page==="secondary"&&(this.scene.userData.secondary_color=e.color),W.applyColorsToAll(this.scene)}}},Fs=e=>(le("data-v-51b5eb64"),e=e(),ce(),e),Bc={id:"player-viewer"},xc={class:"user-tools"},Dc=["id","href","onClick"],$c=Fs(()=>p("div",{id:"player-container"},[p("canvas",{id:"player-renderer"})],-1)),Oc=Fs(()=>p("canvas",{id:"canvas"},null,-1));function Uc(e,t,n,s,i,o){const r=M("PlayerToolsContent");return c(),h("main",Bc,[p("div",xc,[(c(!0),h(H,null,te(i.ToolsButtons,a=>(c(),h("button",{key:a.id,id:a.id,href:a.href,onClick:a.onClick},I(a.text),9,Dc))),128))]),$c,i.itemsList&&i.player&&i.playerInfo?(c(),x(r,{key:0,player:i.player,playerInfo:i.playerInfo,itemsList:i.itemsList,onChangeColor:t[0]||(t[0]=a=>o.changeColor(a))},null,8,["player","playerInfo","itemsList"])):y("",!0),Oc])}const Nc=E(Ec,[["render",Uc],["__scopeId","data-v-51b5eb64"]]);async function jc(e,t,n,s,i){const o=await fetch(e+"add_to_curated_list?level_id="+n+"&list_key="+s+"&level_key="+i,{headers:{Authorization:"Bearer "+t}}),r=await o.text();return o.status!=200||r!=="Success"?(confirm("Error: "+r),!1):!0}async function Hc(e,t,n,s){const i=await fetch(e+"remove_from_curated_list?level_id="+n+"&list_key="+s,{headers:{Authorization:"Bearer "+t}}),o=await i.text();return i.status!=200||o!=="Success"?(confirm("Error: "+o),!1):!0}const qc={props:{item:Object},computed:{creators(){return this.item.creators&&this.item.creators.length>0?"by "+this.item.creators.join(", "):""},hasImage(){return!!(this.item.images&&this.item.images.thumb)},viewerURL(){return"/levels/viewer/?level="+this.item.identifier},creatorUrl(){return"/levels?tab=tab_other_user&user_id="+this.item.identifier.split(":")[0]}}},Vc={class:"level-card"},Fc=["src","width","height"],Gc={class:"info"},zc={class:"title"},Yc={class:"creators"},Kc={class:"buttons"},Wc=["href"],Xc=["href"];function Zc(e,t,n,s,i,o){return c(),h("div",Vc,[o.hasImage?(c(),h("img",{key:0,class:"thumbnail",src:this.$images_server_url+this.item.images.thumb.key,width:this.item.images.thumb.width,height:this.item.images.thumb.height},null,8,Fc)):y("",!0),p("div",Gc,[p("div",zc,I(n.item.title),1),p("div",Yc,I(o.creators),1)]),p("div",Kc,[p("a",{target:"_blank",href:o.creatorUrl,class:"user-button"},"USER",8,Wc),p("a",{target:"_blank",href:o.viewerURL,class:"open-button"},"OPEN",8,Xc)])])}const Jc=E(qc,[["render",Zc],["__scopeId","data-v-42ed1791"]]);const Qc={components:{CurationLevelCard:Jc},props:{type:String},computed:{...R(S,["accessToken"])},data(){return{selected:0,oldLevelList:[],levelList:[],sendButtonText:"Send"}},created(){this.updateType()},watch:{type:function(){this.updateType()}},methods:{async updateType(){if(this.type){const e=await ds(this.$api_server_url,this.accessToken,`curated_${this.type}`,!1,this.$max_level_format_version,!1,!1);e&&(this.oldLevelList=e,this.levelList=this.oldLevelList.slice())}},async addLevels(){let e=prompt("Please enter the list of URLs, each one in a new line: ");if(e!==null){let t=e.split(`
`);for(const n of t){let i=n.split("level=")[1];const o=await It(this.$api_server_url,i);o&&this.levelList.push(o)}}},removeLevel(){let e=this.selected;this.levelList.splice(e,1)},moveLevelUp(){let e=this.selected;if(e>0){let t=this.levelList[e],n=this.levelList[e-1];this.levelList[e-1]=t,this.levelList[e]=n,this.setSelected(e-1)}},moveLevelDown(){let e=this.selected;if(e<this.levelList.length-1){let t=this.levelList[e],n=this.levelList[e+1];this.levelList[e+1]=t,this.levelList[e]=n,this.setSelected(e+1)}},sendUpdates(){if(!this.accessToken){alert("No access token!");return}this.sendButtonText="Sending..";let e=[];for(let t=0;t<this.levelList.length;t++){let n=this.levelList[t].identifier;this.oldLevelList.findIndex(i=>i.identifier===n)!==t&&e.push(jc(this.$api_server_url,this.accessToken,n,this.type,t.toString().padStart(8,"0")))}for(let t=0;t<this.oldLevelList.length;t++){let n=this.oldLevelList[t].identifier;this.levelList.findIndex(i=>i.identifier===n)===-1&&e.push(Hc(this.$api_server_url,this.accessToken,n,this.type))}if(e.length===0){alert("No changes to send!");return}Promise.all(e).then(()=>{this.oldLevelList=this.levelList.slice(),this.sendButtonText="Sent!",setTimeout(()=>{this.sendButtonText="Send"},2e3)}).catch(()=>{alert("Error!")})},setSelected(e){this.selected=e},handleKey(e){e.key==="ArrowUp"?this.moveLevelUp():e.key==="ArrowDown"?this.moveLevelDown():e.key==="Delete"&&this.removeLevel()}},mounted(){window.addEventListener("keydown",this.handleKey)},destroyed(){window.removeEventListener("keydown",this.handleKey)}},Qe=e=>(le("data-v-4c4da6f5"),e=e(),ce(),e),eu={id:"levelList"},tu={id:"controls"},su={id:"count"},nu=Qe(()=>p("br",null,null,-1)),iu=Qe(()=>p("br",null,null,-1)),ou=Qe(()=>p("br",null,null,-1)),ru=Qe(()=>p("br",null,null,-1)),au=Qe(()=>p("br",null,null,-1)),lu=["value"];function cu(e,t,n,s,i,o){const r=M("CurationLevelCard");return c(),h(H,null,[p("div",eu,[(c(!0),h(H,null,te(i.levelList,(a,u)=>(c(),h("div",{key:u,class:K("grid-item"+(u===i.selected?" selected":""))},[J(r,{item:a,onClick:f=>o.setSelected(u)},null,8,["item","onClick"])],2))),128))]),p("div",tu,[p("span",su,I(i.levelList.length)+" levels",1),p("input",{type:"button",value:"Add Levels",id:"add-levels-button",onClick:t[0]||(t[0]=(...a)=>o.addLevels&&o.addLevels(...a))}),nu,p("input",{type:"button",value:"Remove Level",id:"remove-levels-button",onClick:t[1]||(t[1]=(...a)=>o.removeLevel&&o.removeLevel(...a))}),iu,p("input",{type:"button",value:"Move Up",id:"move-up-button",onClick:t[2]||(t[2]=(...a)=>o.moveLevelUp&&o.moveLevelUp(...a))}),ou,p("input",{type:"button",value:"Move Down",id:"move-down-button",onClick:t[3]||(t[3]=(...a)=>o.moveLevelDown&&o.moveLevelDown(...a))}),ru,au,p("input",{type:"button",value:i.sendButtonText,id:"send-button",onClick:t[4]||(t[4]=(...a)=>o.sendUpdates&&o.sendUpdates(...a))},null,8,lu)])],64)}const uu=E(Qc,[["render",cu],["__scopeId","data-v-4c4da6f5"]]);async function du(e,t,n){const s=await fetch(e+"add_curated_list?name="+n,{headers:{Authorization:"Bearer "+t}}),i=await s.text();return s.status!=200?(confirm("Error: "+i),!1):JSON.parse(i)}const hu={computed:{...R(S,["accessToken"])},emits:["handled"],methods:{async addNewList(){if(!this.accessToken){alert("No access token!");return}const e=prompt("Please enter the name of the new list:");if(e){const t=await du(this.$api_server_url,this.accessToken,e);t&&this.$emit("handled",t)}}}};function fu(e,t,n,s,i,o){return c(),h("button",{class:"button",id:"add-new-list-button",onClick:t[0]||(t[0]=(...r)=>o.addNewList&&o.addNewList(...r))},"Add List")}const pu=E(hu,[["render",fu],["__scopeId","data-v-e8d48a0a"]]);async function _u(e,t,n){const s=await fetch(e+"remove_curated_list?name="+n,{headers:{Authorization:"Bearer "+t}}),i=await s.text();return s.status!=200?(confirm("Error: "+i),!1):JSON.parse(i)}const mu={computed:{...R(S,["accessToken"])},emits:["handled"],methods:{async removeList(){if(!this.accessToken){alert("No access token!");return}const e=prompt("Please enter the name of the list to remove:");if(e){const t=await _u(this.$api_server_url,this.accessToken,e);t&&this.$emit("handled",t)}}}};function vu(e,t,n,s,i,o){return c(),h("button",{class:"button",id:"remove-list-button",onClick:t[0]||(t[0]=(...r)=>o.removeList&&o.removeList(...r))},"Remove List")}const yu=E(mu,[["render",vu],["__scopeId","data-v-10f6db3b"]]);async function gu(e){const t=await fetch(e+"get_curated_lists/"),n=await t.text();return t.status!=200?(confirm("Error: "+n),!1):JSON.parse(n)}const bu={components:{CurationControls:uu,NewCurationButton:pu,RemoveCurationButton:yu,Terms:qs},computed:{...R(S,["isAdmin"]),...R(S,["accessToken"])},data(){return{typeSelector:null,typesList:[],selected:0,type:""}},async created(){const e=await gu(this.$api_server_url);e&&(this.typesList=e,this.displayTypeSelector(),this.handleTypeChange())},mounted(){this.typeSelector=document.getElementById("typeSelector")},methods:{async handleTypeChange(){this.type=this.typeSelector.options[this.typeSelector.selectedIndex].value},handleTypeListUpdate(e){this.typesList=e,this.displayTypeSelector()},displayTypeSelector(){this.typeSelector.innerHTML="";for(let e=0;e<this.typesList.length;e++){let t=this.typesList[e],n=document.createElement("option");n.value=t,n.text=t,this.typeSelector.appendChild(n)}}}},Gs=e=>(le("data-v-af9eed97"),e=e(),ce(),e),wu={id:"curation"},ku=Gs(()=>p("a",{class:"back-button",href:"/levels"},"Back",-1)),Su=Gs(()=>p("h1",null,"Curated Level Lists",-1)),Cu={id:"list-control"},Lu={key:0,id:"buttonWrapper"};function Iu(e,t,n,s,i,o){const r=M("NewCurationButton"),a=M("RemoveCurationButton"),u=M("CurationControls"),f=M("Terms");return c(),h("div",wu,[ku,p("header",null,[Su,p("div",Cu,[e.isAdmin?(c(),h("div",Lu,[J(r,{onHandled:o.handleTypeListUpdate},null,8,["onHandled"]),J(a,{onHandled:o.handleTypeListUpdate},null,8,["onHandled"])])):y("",!0),p("select",{id:"typeSelector",onChange:t[0]||(t[0]=(...d)=>o.handleTypeChange&&o.handleTypeChange(...d))},null,32)])]),p("main",null,[J(u,{type:i.type},null,8,["type"])]),J(f)])}const Tu=E(bu,[["render",Iu],["__scopeId","data-v-af9eed97"]]),Au=[{path:"/",component:Gi},{path:"/levels",component:sc},{path:"/player",component:Nc},{path:"/curation",component:Tu}],Pu=$i({history:Jn(),routes:Au});const Pe=Tn(xn);Pe.config.globalProperties.$api_server_url=An;Pe.config.globalProperties.$images_server_url=Pn;Pe.config.globalProperties.$page_url=Mn;Pe.config.globalProperties.$max_level_format_version=Rn;Pe.use(Pu);const zs=En();zs.use(Bn);Pe.use(zs);Pe.mount("#app");
